<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Org Dashboard â€” V1.2 (MVP Updates)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['CTSans', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        main: {
                            50: '#f6fcff',
                            100: '#e6f8ff',
                            200: '#d6eafe',
                            300: '#a6d3fd',
                            400: '#65abff',
                            500: '#468af1',
                            600: '#186ded',
                            700: '#085fe2',
                            800: '#1357be',
                            900: '#0046ae',
                            950: '#0b3c85',
                        },
                        neutral: {
                            50: '#fcfcfd',
                            100: '#f7f9fd',
                            200: '#f0f4fa',
                            300: '#dce2ec',
                            400: '#c9d0de',
                            500: '#8d9bb6',
                            600: '#6b7492',
                            700: '#63708a',
                            800: '#5d687e',
                            900: '#3f4b63',
                            950: '#313b4d',
                        },
                        success: {
                            400: '#75e0a7',
                            500: '#47cd89',
                            600: '#17b26a',
                            700: '#079455',
                            800: '#067647',
                        },
                        danger: {
                            400: '#fda29b',
                            600: '#f04438',
                        },
                        warning: {
                            400: '#ffca8d',
                        },
                        accent: {
                            500: '#a48afb',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        /* AI Gradient Link Style */
        .ai-gradient-link {
            background: linear-gradient(135deg, #186ded, #875bf7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: underline;
            text-decoration-color: rgba(99, 102, 241, 0.4);
            font-weight: 600;
            transition: text-decoration-color 0.2s;
        }
        .ai-gradient-link:hover {
            text-decoration-color: rgba(99, 102, 241, 0.8);
        }
        
        /* AI Insight Card Thumbs - Show on Hover */
        .insight-card .insight-thumbs {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .insight-card:hover .insight-thumbs {
            opacity: 1;
        }
        
        /* Sidenav Collapse Styles */
        .sidenav-expanded {
            width: 16rem;
            transition: width 0.3s ease-in-out;
        }
        .sidenav-collapsed {
            width: 4rem;
            transition: width 0.3s ease-in-out;
        }
        .sidenav-collapsed .sidenav-label,
        .sidenav-collapsed .sidenav-chevron,
        .sidenav-collapsed .sidenav-section-header,
        .sidenav-collapsed .sidenav-children,
        .sidenav-collapsed .sidenav-child-item {
            opacity: 0;
            width: 0;
            overflow: hidden;
            display: none;
            transition: opacity 0.2s ease-in-out;
        }
        .sidenav-collapsed .sidenav-create-btn {
            padding-left: 0;
            padding-right: 0;
            justify-content: center;
        }
        .sidenav-collapsed nav {
            padding-left: 0.25rem;
            padding-right: 0.25rem;
        }
        .sidenav-collapsed nav ul li a,
        .sidenav-collapsed nav ul li button {
            justify-content: center;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        .sidenav-collapsed nav ul li a > div,
        .sidenav-collapsed nav ul li button > div {
            justify-content: center;
        }
        .sidenav-toggle-btn {
            z-index: 100;
        }
        
        /* Developer Mode Styles */
        .dev-mode .dev-inspect {
            position: relative;
            outline: 2px dashed transparent;
            transition: outline-color 0.15s ease;
        }
        .dev-mode .dev-inspect:hover {
            outline-color: #7839ee;
            outline-offset: 2px;
        }
        .dev-mode .dev-inspect:hover .dev-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        /* Spacing Debug Mode */
        .dev-spacing [class*="p-"], .dev-spacing [class*="px-"], .dev-spacing [class*="py-"],
        .dev-spacing [class*="pl-"], .dev-spacing [class*="pr-"], .dev-spacing [class*="pt-"], .dev-spacing [class*="pb-"] {
            background-image: repeating-linear-gradient(
                90deg,
                rgba(16, 185, 129, 0.08) 0px,
                rgba(16, 185, 129, 0.08) 1px,
                transparent 1px,
                transparent 4px
            ), repeating-linear-gradient(
                0deg,
                rgba(16, 185, 129, 0.08) 0px,
                rgba(16, 185, 129, 0.08) 1px,
                transparent 1px,
                transparent 4px
            );
            outline: 1px solid rgba(16, 185, 129, 0.3);
        }
        .dev-spacing [class*="m-"], .dev-spacing [class*="mx-"], .dev-spacing [class*="my-"],
        .dev-spacing [class*="ml-"], .dev-spacing [class*="mr-"], .dev-spacing [class*="mt-"], .dev-spacing [class*="mb-"] {
            outline: 1px dashed rgba(251, 146, 60, 0.5);
        }
        .dev-spacing [class*="gap-"] {
            outline: 1px solid rgba(139, 92, 246, 0.4);
        }
        .dev-spacing .dev-spacing-label {
            display: block !important;
        }
        .dev-spacing-label {
            display: none;
            position: absolute;
            top: -18px;
            left: 0;
            padding: 2px 6px;
            background: #1e1e2e;
            border-radius: 3px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 9px;
            color: #a6e3a1;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
        }
        
        /* Dev Mode Toggle Panel */
        .dev-panel {
            display: none;
            align-items: center;
            gap: 8px;
            margin-left: 12px;
            padding-left: 12px;
            border-left: 1px solid #404040;
        }
        .dev-mode .dev-panel {
            display: flex;
        }
        .dev-toggle-btn {
            padding: 4px 10px;
            background: #27272a;
            border: 1px solid #3f3f46;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 10px;
            color: #a1a1aa;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .dev-toggle-btn:hover {
            background: #3f3f46;
            color: #e4e4e7;
        }
        .dev-toggle-btn.active {
            background: #10b981;
            border-color: #10b981;
            color: #fff;
        }
        .dev-toggle-btn.active.spacing {
            background: #10b981;
        }
        .dev-toggle-btn.active.grid {
            background: #8b5cf6;
        }
        .dev-toggle-btn.active.gestures {
            background: #f59e0b;
        }
        
        /* Gesture Simulator */
        .gesture-ripple {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(99, 102, 241, 0.3);
            border: 2px solid rgba(99, 102, 241, 0.8);
            animation: gesture-pulse 0.6s ease-out;
        }
        @keyframes gesture-pulse {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        .gesture-swipe-indicator {
            position: absolute;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #6366f1, transparent);
            border-radius: 2px;
        }
        .gesture-swipe-left { animation: swipe-left 0.4s ease-out; }
        .gesture-swipe-right { animation: swipe-right 0.4s ease-out; }
        .gesture-swipe-up { animation: swipe-up 0.4s ease-out; width: 4px; height: 80px; background: linear-gradient(180deg, transparent, #6366f1, transparent); }
        .gesture-swipe-down { animation: swipe-down 0.4s ease-out; width: 4px; height: 80px; background: linear-gradient(180deg, transparent, #6366f1, transparent); }
        @keyframes swipe-left { 0% { transform: translateX(40px); opacity: 1; } 100% { transform: translateX(-40px); opacity: 0; } }
        @keyframes swipe-right { 0% { transform: translateX(-40px); opacity: 1; } 100% { transform: translateX(40px); opacity: 0; } }
        @keyframes swipe-up { 0% { transform: translateY(40px); opacity: 1; } 100% { transform: translateY(-40px); opacity: 0; } }
        @keyframes swipe-down { 0% { transform: translateY(-40px); opacity: 1; } 100% { transform: translateY(40px); opacity: 0; } }
        
        /* Spacing Legend */
        .dev-legend {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 9px;
            color: #71717a;
        }
        .dev-legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .dev-legend-swatch {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }
        .dev-legend-swatch.padding {
            background: rgba(16, 185, 129, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.6);
        }
        .dev-legend-swatch.margin {
            background: transparent;
            border: 1px dashed rgba(251, 146, 60, 0.7);
        }
        .dev-legend-swatch.gap {
            background: rgba(139, 92, 246, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.6);
        }
        .dev-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 0;
            z-index: 1000;
            min-width: 280px;
            padding: 12px;
            background: #1e1e2e;
            border: 1px solid #313244;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(4px);
            transition: all 0.2s ease;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 11px;
            color: #cdd6f4;
        }
        .dev-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 20px;
            border: 6px solid transparent;
            border-top-color: #1e1e2e;
        }
        .dev-tooltip-header {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #313244;
        }
        .dev-tooltip-component {
            color: #cba6f7;
            font-weight: 600;
        }
        .dev-tooltip-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        .dev-tooltip-label {
            color: #6c7086;
        }
        .dev-tooltip-value {
            color: #89b4fa;
        }
        .dev-tooltip-color {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .dev-tooltip-swatch {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .dev-tooltip-link {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-top: 8px;
            padding: 6px 10px;
            background: #313244;
            border-radius: 4px;
            color: #89dceb;
            text-decoration: none;
            transition: background 0.15s ease;
        }
        .dev-tooltip-link:hover {
            background: #45475a;
        }

        /* CT Sans Font Family */
        @font-face {
            font-family: 'CTSans';
            src: url('fonts/CTSans-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'CTSans';
            src: url('fonts/CTSans-Semibold.woff2') format('woff2');
            font-weight: 600;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'CTSans';
            src: url('fonts/CTSans-Bold.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }

        body {
            font-family: 'CTSans', system-ui, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* North Star Dashboard Widget Styles */
        :root {
            /* Donut - Main blues (dark to light) */
            --donut-1: #0b3c85;
            --donut-2: #1357be;
            --donut-3: #468af1;
            --donut-4: #a6d3fd;
            
            /* Leaderboards - Success greens (dark to light) */
            --workspace-1: #067647;
            --workspace-2: #079455;
            --workspace-3: #17b26a;
            --workspace-low-1: #75e0a7;
            --workspace-low-2: #a9efc5;
        }

        /* Donut Chart Styles */
        .donut-container {
            position: relative;
        }
        .donut-segment {
            cursor: pointer;
            transition: opacity 0.15s ease, stroke-width 0.15s ease;
        }
        .donut-segment:hover {
            stroke-width: 8;
        }
        .donut-container:has(.donut-segment:hover) .donut-segment:not(:hover) {
            opacity: 0.4;
        }
        
        /* Responsive Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(400px, 1fr));
            gap: 1.5rem;
            align-items: start;
        }
        
        .dashboard-grid > * {
            min-width: 0;
        }
        
        .dashboard-column {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            min-width: 400px;
        }
        
        /* Layout: AI + Metrics on LEFT, Approvals + Activity on RIGHT */
        /* Using display:contents to flatten children into the grid, then grid-column to place them */
        .dashboard-grid {
            display: grid !important;
            grid-template-columns: 1fr 1fr;
            grid-auto-flow: dense;
        }
        
        .dashboard-column {
            display: contents; /* Flatten children into parent grid */
        }
        
        /* Left column items (AI card + all metrics) */
        .dashboard-column.right-col .ai-insights-card {
            grid-column: 1;
            grid-row: 1;
        }
        
        .dashboard-column .leaderboard-card {
            grid-column: 1;
        }
        
        .dashboard-column .metrics-card {
            grid-column: 1;
        }
        
        /* Checklist in left column */
        .dashboard-column .checklist-card {
            grid-column: 1;
            grid-row: 1;
        }
        
        /* Right column items (Approval + Activity) */
        .dashboard-column .approval-card {
            grid-column: 2;
            grid-row: 2;
        }
        
        /* Activity card in right column, same row as checklist */
        .dashboard-column.right-col .activity-card {
            grid-column: 2;
            grid-row: 1;
        }
        
        /* Hide sidebar on mobile/tablet */
        @media (max-width: 1023px) {
            #sidebar {
                display: none !important;
            }
        }
        
        /* Mobile-first: Stack all cards */
        @media (max-width: 768px) {
            .dashboard-grid {
                display: flex !important;
                flex-direction: column;
                gap: 1rem;
            }
            .dashboard-column {
                display: flex !important;
                flex-direction: column;
                min-width: 280px;
                gap: 1rem;
                width: 100%;
            }
            /* Reorder: AI insights and Approval first on mobile */
            .dashboard-column.right-col {
                order: -1;
            }
            /* Bubble up AI Insights and Campaign Approval to top */
            .checklist-card {
                order: -10 !important;
            }
            .ai-insights-card {
                order: -2 !important;
            }
            .approval-card {
                order: -1 !important;
            }
            .activity-card {
                order: 10 !important;
            }
            
            /* ===== MONARCH-STYLE METRICS CARDS ===== */
            .metrics-card {
                height: auto !important;
                padding: 1rem !important;
                background: linear-gradient(135deg, #fff 0%, #fcfcfd 100%) !important;
            }
            .metrics-card h3 {
                font-size: 0.8125rem !important;
                margin-bottom: 0.625rem !important;
                text-transform: uppercase;
                letter-spacing: 0.025em;
                color: #6b7492 !important;
            }
            .metrics-card .grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 0.75rem 1rem !important;
            }
            /* Large prominent numbers like Monarch - bigger & bolder */
            .metrics-card .text-xl {
                font-size: 1.75rem !important;
                font-weight: 700 !important;
                line-height: 1.1 !important;
                color: #313b4d !important;
                letter-spacing: -0.02em;
            }
            .metrics-card .text-xs {
                font-size: 0.6875rem !important;
                color: #8d9bb6 !important;
                text-transform: uppercase;
                letter-spacing: 0.03em;
            }
            /* Change indicator badge - Monarch style */
            .metrics-card .change-badge {
                display: inline-flex !important;
                align-items: center !important;
                gap: 2px;
                padding: 2px 6px;
                border-radius: 4px;
                font-size: 0.6875rem !important;
                font-weight: 600 !important;
                margin-left: 0.375rem;
            }
            .metrics-card .change-badge.positive {
                background: #ecfdf3;
                color: #079455 !important;
            }
            .metrics-card .change-badge.negative {
                background: #fef3f2;
                color: #d92d20 !important;
            }
            /* Trend arrow in metrics */
            .metrics-card .group\/trend {
                display: inline-flex !important;
                align-items: center !important;
            }
            .metrics-card .group\/trend svg {
                width: 0.75rem !important;
                height: 0.75rem !important;
            }
            /* Inline trend display */
            .metrics-card .inline-trend {
                display: inline !important;
                font-size: 0.75rem !important;
                font-weight: 600 !important;
                margin-left: 0.25rem !important;
            }
            .metrics-card .inline-trend.positive {
                color: #079455 !important;
            }
            .metrics-card .inline-trend.negative {
                color: #d92d20 !important;
            }
            
            /* ===== AI INSIGHTS CAROUSEL ===== */
            .ai-insights-list {
                display: flex;
                overflow-x: auto;
                scroll-snap-type: x mandatory;
                -webkit-overflow-scrolling: touch;
                gap: 0.75rem;
                padding-bottom: 0.5rem;
            }
            .ai-insights-list > div {
                flex: 0 0 90%;
                scroll-snap-align: start;
            }
            
            /* ===== MONARCH-STYLE ACTIVITY CARDS ===== */
            .activity-card {
                padding: 1rem !important;
                height: auto !important;
                max-height: none !important;
            }
            .activity-card h3 {
                font-size: 0.8125rem !important;
                text-transform: uppercase;
                letter-spacing: 0.025em;
                color: #6b7492 !important;
            }
            
            /* Timeline mobile optimizations */
            .activity-card .timeline-scroll {
                max-height: 320px;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            .activity-card .timeline-date {
                width: 2.5rem !important;
                min-width: 2.5rem !important;
            }
            .activity-card .timeline-date p:first-child {
                font-size: 0.6875rem !important;
            }
            .activity-card .timeline-date p:last-child {
                font-size: 0.5625rem !important;
            }
            .activity-card .timeline-content {
                font-size: 0.8125rem !important;
            }
            .activity-card .timeline-content p {
                font-size: 0.6875rem !important;
            }
            /* Hide earlier week section on mobile */
            .activity-card .earlier-week {
                display: none;
            }
            /* Reduce legend size on mobile */
            .activity-card .legend-item {
                font-size: 0.5625rem !important;
            }
            .activity-card .legend-dot {
                width: 0.5rem !important;
                height: 0.5rem !important;
            }
            /* Compact activity items like Monarch transactions */
            .activity-item {
                padding: 0.875rem !important;
                border-radius: 0.75rem !important;
                border: none !important;
                border-bottom: 1px solid #f0f4fa !important;
                box-shadow: none !important;
                background: transparent !important;
                display: flex !important;
                align-items: center !important;
            }
            .activity-item:hover {
                background: #f7f9fd !important;
            }
            .activity-item .flex.gap-4 {
                gap: 0.75rem !important;
                width: 100%;
            }
            /* Activity icon container - Monarch style */
            .activity-item .activity-icon {
                width: 2.5rem !important;
                height: 2.5rem !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                flex-shrink: 0 !important;
            }
            .activity-item .activity-icon.email-icon {
                background: #e6f8ff !important;
            }
            .activity-item .activity-icon.sms-icon {
                background: #ecfdf3 !important;
            }
            .activity-item .activity-icon.social-icon {
                background: #ece9fe !important;
            }
            /* Smaller thumbnails on mobile - square icon style */
            .activity-item img {
                width: 2.5rem !important;
                height: 2.5rem !important;
                border-radius: 0.5rem !important;
                object-fit: cover !important;
            }
            .activity-item .text-sm {
                font-size: 0.8125rem !important;
                font-weight: 500 !important;
                color: #313b4d !important;
            }
            .activity-item .text-xs {
                font-size: 0.6875rem !important;
                color: #8d9bb6 !important;
            }
            /* Hide detailed stats on mobile, show key metric only */
            .activity-item .activity-stat-opens,
            .activity-item .activity-stat-clicks {
                display: none !important;
            }
            /* Right-aligned metric - Monarch amount style */
            .activity-item .activity-stat-rate,
            .activity-item .activity-amount {
                font-size: 1rem !important;
                font-weight: 700 !important;
                color: #313b4d !important;
                margin-left: auto !important;
            }
            .activity-item .activity-amount.positive {
                color: #079455 !important;
            }
            .activity-item .activity-amount.negative {
                color: #d92d20 !important;
            }
            /* Activity row layout */
            .activity-item .activity-content {
                flex: 1;
                min-width: 0;
            }
            .activity-item .activity-meta {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-top: 0.25rem;
            }
            
            /* ===== SMALLER LEADERBOARD ===== */
            .leaderboard-card {
                height: auto !important;
                max-height: 320px !important;
                padding: 1rem !important;
            }
            .leaderboard-card h3 {
                font-size: 0.8125rem !important;
                text-transform: uppercase;
                letter-spacing: 0.025em;
                color: #6b7492 !important;
            }
            .leaderboard-card .space-y-3 {
                gap: 0.375rem !important;
            }
            
            /* ===== DATE FILTER COMPACT ===== */
            #page-date-filter {
                padding: 0.625rem 0.875rem !important;
            }
            #page-date-filter button {
                padding: 0.375rem 0.625rem !important;
                font-size: 0.625rem !important;
            }
        }
        
        /* Tablet breakpoint */
        @media (max-width: 1200px) and (min-width: 769px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .dashboard-column {
                min-width: 320px;
            }
        }
        
        /* Large screens */
        @media (min-width: 1800px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, minmax(380px, 1fr));
            }
        }
        
        /* Carousel scroll indicators */
        .carousel-dots {
            display: none;
        }
        @media (max-width: 768px) {
            .carousel-dots {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                margin-top: 0.5rem;
            }
            .carousel-dot {
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #dce2ec;
            }
            .carousel-dot.active {
                background: #186ded;
            }
        }
        
        /* ===== MONARCH-STYLE GLOBAL ENHANCEMENTS ===== */
        
        /* Spark icon animation for AI features */
        .ai-spark-icon {
            display: inline-block;
            animation: sparkle 2s ease-in-out infinite;
        }
        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.1) rotate(5deg); opacity: 0.9; }
        }
        
        /* AI Insights Carousel Slides */
        .insight-slide {
            animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .insight-slide.hidden {
            display: none;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Insight dot active/hover */
        .insight-dot {
            cursor: pointer;
        }
        .insight-dot:hover {
            transform: scale(1.4);
        }
        
        /* AI Insights card - premium styling */
        .ai-insights-card {
            box-shadow: 
                0 20px 50px -15px rgba(30, 58, 95, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.1) inset;
        }
        
        /* Remove focus outlines on menu buttons */
        .unified-range-btn:focus,
        .unified-type-btn:focus,
        .unified-metric-btn:focus,
        #unified-filter-menu button:focus {
            outline: none;
            box-shadow: none;
        }
        
        /* Insight card inside carousel */
        .insight-slide > div {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .insight-slide > div:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px -8px rgba(0, 0, 0, 0.15);
        }
        
        /* Prominent change indicators - Monarch style */
        .change-indicator {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.6875rem;
            font-weight: 600;
        }
        .change-indicator.positive {
            background: #ecfdf3;
            color: #079455;
        }
        .change-indicator.negative {
            background: #fef3f2;
            color: #d92d20;
        }
        
        /* Large prominent metric numbers - Monarch style */
        .metric-value-large {
            font-size: 1.75rem;
            font-weight: 700;
            line-height: 1.1;
            color: #313b4d;
            letter-spacing: -0.02em;
        }
        @media (max-width: 768px) {
            .metric-value-large {
                font-size: 1.5rem;
            }
        }
        
        /* Activity list Monarch-style amounts */
        .activity-amount-right {
            margin-left: auto;
            font-size: 1rem;
            font-weight: 700;
            color: #313b4d;
        }
        .activity-amount-right.positive::before {
            content: '+';
            color: #079455;
        }
        .activity-amount-right.negative::before {
            content: '-';
            color: #d92d20;
        }
        
        /* ===== VIEWPORT SIMULATION STYLES ===== */
        
        /* Viewport button active state */
        .viewport-btn.active {
            background: #186ded !important;
            color: white !important;
        }
        
        /* Mobile viewport simulation */
        body.viewport-mobile,
        body.viewport-tablet {
            background: #1f1f23 !important;
        }
        
        body.viewport-mobile #sidebar,
        body.viewport-tablet #sidebar {
            display: none !important;
        }
        
        body.viewport-mobile #sidebar-backdrop {
            display: none !important;
        }
        
        /* Viewport overlay styling */
        #viewport-overlay {
            pointer-events: none;
        }
        
        /* Mobile viewport - force mobile breakpoint styles */
        body.viewport-mobile .dashboard-grid,
        body.viewport-tablet .dashboard-grid {
            display: flex !important;
            flex-direction: column !important;
            gap: 1rem !important;
        }
        
        body.viewport-mobile .dashboard-column,
        body.viewport-tablet .dashboard-column {
            display: flex !important;
            flex-direction: column !important;
            min-width: 100% !important;
            gap: 1rem !important;
            width: 100% !important;
        }
        
        /* Reset grid-column for mobile/tablet */
        body.viewport-mobile .dashboard-column .ai-insights-card,
        body.viewport-mobile .dashboard-column .leaderboard-card,
        body.viewport-mobile .dashboard-column .metrics-card,
        body.viewport-mobile .dashboard-column .approval-card,
        body.viewport-mobile .dashboard-column .activity-card,
        body.viewport-tablet .dashboard-column .ai-insights-card,
        body.viewport-tablet .dashboard-column .leaderboard-card,
        body.viewport-tablet .dashboard-column .metrics-card,
        body.viewport-tablet .dashboard-column .approval-card,
        body.viewport-tablet .dashboard-column .activity-card {
            grid-column: unset !important;
            grid-row: unset !important;
        }

        body.viewport-mobile .dashboard-column.right-col,
        body.viewport-tablet .dashboard-column.right-col {
            order: -1 !important;
        }
        
        /* Bubble up AI Insights and Campaign Approval to top */
        body.viewport-mobile .checklist-card,
        body.viewport-tablet .checklist-card {
            order: -10 !important;
        }
        body.viewport-mobile .ai-insights-card,
        body.viewport-tablet .ai-insights-card {
            order: -3 !important;
        }
        body.viewport-mobile .approval-card,
        body.viewport-tablet .approval-card {
            order: -2 !important;
        }
        body.viewport-mobile .leaderboard-card,
        body.viewport-tablet .leaderboard-card {
            order: -1 !important;
        }
        body.viewport-mobile .activity-card,
        body.viewport-tablet .activity-card {
            order: 10 !important;
        }
        
        body.viewport-mobile .metrics-card {
            height: auto !important;
            padding: 1rem !important;
        }
        
        body.viewport-mobile .leaderboard-card {
            height: auto !important;
            max-height: 320px !important;
        }
        
        body.viewport-mobile .activity-card {
            height: auto !important;
            max-height: 380px !important;
        }
        
        body.viewport-mobile .ai-insights-list {
            display: flex !important;
            overflow-x: auto !important;
            scroll-snap-type: x mandatory !important;
        }
        
        body.viewport-mobile .ai-insights-list > div {
            flex: 0 0 90% !important;
            scroll-snap-align: start !important;
        }
        
        body.viewport-mobile .carousel-dots,
        body.viewport-tablet .carousel-dots {
            display: flex !important;
        }
        
        /* Tablet viewport - same as mobile */
        body.viewport-tablet .dashboard-grid {
            display: flex !important;
            flex-direction: column !important;
            gap: 1rem !important;
        }
        
        body.viewport-tablet .dashboard-column {
            min-width: 100% !important;
            gap: 1rem !important;
            width: 100% !important;
        }
        
        body.viewport-tablet .dashboard-column.right-col {
            order: -1 !important;
        }
        
        /* Bubble up AI Insights and Campaign Approval to top */
        body.viewport-tablet .checklist-card {
            order: -10 !important;
        }
        body.viewport-tablet .ai-insights-card {
            order: -2 !important;
        }
        body.viewport-tablet .approval-card {
            order: -1 !important;
        }
        body.viewport-tablet .activity-card {
            order: 10 !important;
        }
        
        body.viewport-tablet .metrics-card {
            height: auto !important;
            padding: 1rem !important;
        }
        
        body.viewport-tablet .leaderboard-card {
            height: auto !important;
            max-height: 320px !important;
        }
        
        body.viewport-tablet .activity-card {
            height: auto !important;
            max-height: 380px !important;
        }
        
        body.viewport-tablet .ai-insights-list {
            display: flex !important;
            overflow-x: auto !important;
            scroll-snap-type: x mandatory !important;
        }
        
        body.viewport-tablet .ai-insights-list > div {
            flex: 0 0 90% !important;
            scroll-snap-align: start !important;
        }
        
        body.viewport-tablet #sidebar-backdrop {
            display: none !important;
        }
        
        /* Mobile viewport menu fixes */
        body.viewport-mobile #user-menu,
        body.viewport-tablet #user-menu {
            position: fixed !important;
            top: 52px !important;
            right: 50% !important;
            transform: translateX(calc(50% + 8px)) !important;
            max-width: 250px !important;
            z-index: 200 !important;
        }
        
        body.viewport-mobile #help-panel,
        body.viewport-tablet #help-panel {
            position: fixed !important;
            right: 50% !important;
            transform: translateX(calc(50% + 187.5px)) !important;
            max-width: 280px !important;
            z-index: 200 !important;
        }
        
        body.viewport-mobile #ai-assistant-modal,
        body.viewport-tablet #ai-assistant-modal {
            z-index: 200 !important;
        }
        
        body.viewport-mobile #ai-assistant-modal > div:last-child,
        body.viewport-tablet #ai-assistant-modal > div:last-child {
            max-width: calc(100% - 2rem) !important;
            margin: 1rem auto !important;
            left: 50% !important;
        }
        
        /* Ensure filter menus work in viewport simulation */
        body.viewport-mobile #unified-filter-menu,
        body.viewport-mobile #email-filter-menu,
        body.viewport-mobile #contacts-filter-menu,
        body.viewport-mobile #sms-filter-menu,
        body.viewport-tablet #unified-filter-menu,
        body.viewport-tablet #email-filter-menu,
        body.viewport-tablet #contacts-filter-menu,
        body.viewport-tablet #sms-filter-menu {
            z-index: 200 !important;
            position: absolute !important;
            right: auto !important;
            transform: translateX(-50%) !important;
        }
        
        /* Hide AI assistant button text on mobile viewport */
        body.viewport-mobile .ai-assistant-btn-text {
            display: none !important;
        }
    </style>
</head>
<body class="bg-neutral-100">
    <!-- Author Bar -->
    <div class="fixed bottom-0 left-0 right-0 h-12 bg-neutral-950 flex items-center justify-between px-6 z-[100]">
        <div class="flex items-center gap-4">
            <span class="text-white font-semibold text-lg">V1.2</span>
            <span class="text-neutral-500 text-sm">MVP Updates</span>
            <!-- Dev Mode Toggle -->
            <button 
                id="dev-mode-toggle"
                onclick="toggleDevMode()"
                class="ml-4 px-3 py-1 bg-neutral-800 hover:bg-neutral-700 text-neutral-500 hover:text-white rounded-md text-xs font-mono transition-colors flex items-center gap-2"
            >
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>
                <span id="dev-mode-label">Dev Mode</span>
            </button>
            
            <!-- Dev Mode Sub-toggles -->
            <div class="dev-panel">
                <button id="spacing-toggle" onclick="toggleSpacing()" class="dev-toggle-btn spacing">
                    <span class="flex items-center gap-1.5">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
                        Spacing
                    </span>
                </button>
                <button id="gesture-toggle" onclick="toggleGesturePanel()" class="dev-toggle-btn">
                    <span class="flex items-center gap-1.5">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"/></svg>
                        Gestures
                    </span>
                </button>
                <div class="dev-legend">
                    <div class="dev-legend-item">
                        <span class="dev-legend-swatch padding"></span>
                        <span>padding</span>
                    </div>
                    <div class="dev-legend-item">
                        <span class="dev-legend-swatch margin"></span>
                        <span>margin</span>
                    </div>
                    <div class="dev-legend-item">
                        <span class="dev-legend-swatch gap"></span>
                        <span>gap</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <a href="v1.html" class="px-4 py-1.5 bg-neutral-700 hover:bg-neutral-600 text-white rounded-lg text-sm font-medium transition-colors">V1.0 - Production</a>
            <a href="v1.2.html" class="px-4 py-1.5 bg-main-600 text-white rounded-lg text-sm font-medium">V1.2 - MVP</a>
            <a href="http://localhost:3000/option-b-northstar-empty.html?role=global&data=filled" class="px-4 py-1.5 bg-neutral-700 hover:bg-neutral-600 text-white rounded-lg text-sm font-medium transition-colors">Vx - Future</a>
        </div>
    </div>

    <!-- Gesture Simulation Panel -->
    <div id="gesture-panel" class="hidden fixed bottom-16 right-4 w-72 bg-neutral-900 rounded-xl shadow-2xl border border-neutral-700 z-[101] overflow-hidden">
        <div class="bg-neutral-800 px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <svg class="w-4 h-4 text-accent-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"/></svg>
                <span class="text-white font-medium text-sm">Gesture Simulator</span>
            </div>
            <button onclick="toggleGesturePanel()" class="text-neutral-400 hover:text-white transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
        </div>
        
        <div class="p-4 space-y-4">
            <!-- Swipe Gestures -->
            <div>
                <p class="text-[10px] text-neutral-500 uppercase tracking-wider font-medium mb-2">Swipe</p>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="simulateGesture('swipe-left')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"/></svg>
                        <span class="text-[10px] text-neutral-400">Left</span>
                    </button>
                    <button onclick="simulateGesture('swipe-right')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/></svg>
                        <span class="text-[10px] text-neutral-400">Right</span>
                    </button>
                    <button onclick="simulateGesture('swipe-up')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 11l7-7 7 7M5 19l7-7 7 7"/></svg>
                        <span class="text-[10px] text-neutral-400">Up</span>
                    </button>
                    <button onclick="simulateGesture('swipe-down')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m14-8l-7 7-7-7"/></svg>
                        <span class="text-[10px] text-neutral-400">Down</span>
                    </button>
                </div>
            </div>
            
            <!-- Tap Gestures -->
            <div>
                <p class="text-[10px] text-neutral-500 uppercase tracking-wider font-medium mb-2">Tap</p>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="simulateGesture('tap')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" stroke-width="2"/></svg>
                        <span class="text-[10px] text-neutral-400">Tap</span>
                    </button>
                    <button onclick="simulateGesture('double-tap')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="9" cy="12" r="2.5" stroke-width="2"/><circle cx="15" cy="12" r="2.5" stroke-width="2"/></svg>
                        <span class="text-[10px] text-neutral-400">Double</span>
                    </button>
                    <button onclick="simulateGesture('long-press')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke-width="2"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l2 2"/></svg>
                        <span class="text-[10px] text-neutral-400">Long</span>
                    </button>
                </div>
            </div>
            
            <!-- Multi-touch -->
            <div>
                <p class="text-[10px] text-neutral-500 uppercase tracking-wider font-medium mb-2">Multi-touch</p>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="simulateGesture('pinch-in')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9L4 4m0 0v4m0-4h4m7 11l5 5m0 0v-4m0 4h-4M9 15L4 20m0 0v-4m0 4h4m7-11l5-5m0 0v4m0-4h-4"/></svg>
                        <span class="text-[10px] text-neutral-400">Pinch In</span>
                    </button>
                    <button onclick="simulateGesture('pinch-out')" class="gesture-btn flex flex-col items-center gap-1 p-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors">
                        <svg class="w-5 h-5 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
                        <span class="text-[10px] text-neutral-400">Pinch Out</span>
                    </button>
                </div>
            </div>
            
            <!-- Pull to Refresh -->
            <div>
                <p class="text-[10px] text-neutral-500 uppercase tracking-wider font-medium mb-2">Actions</p>
                <button onclick="simulateGesture('pull-refresh')" class="gesture-btn w-full flex items-center justify-center gap-2 p-2.5 bg-main-600/20 hover:bg-main-600/30 text-main-400 rounded-lg transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                    <span class="text-sm font-medium">Pull to Refresh</span>
                </button>
            </div>
        </div>
        
        <!-- Gesture Log -->
        <div class="border-t border-neutral-700 px-4 py-3">
            <p class="text-[10px] text-neutral-500 uppercase tracking-wider font-medium mb-2">Recent Gestures</p>
            <div id="gesture-log" class="h-16 overflow-y-auto text-xs text-neutral-400 font-mono space-y-1">
                <p class="text-neutral-600">No gestures yet...</p>
            </div>
        </div>
    </div>
    
    <!-- Gesture Visual Indicator -->
    <div id="gesture-indicator" class="hidden fixed inset-0 pointer-events-none z-[102]">
        <div id="gesture-visual" class="absolute flex items-center justify-center">
            <div class="gesture-ripple"></div>
        </div>
    </div>

    <!-- Top Navigation Bar - Production Style -->
    <nav class="bg-neutral-100 border-b border-neutral-200 px-3 sm:px-4 py-2 sm:py-2.5 flex items-center justify-between">
        <!-- Left Side - Hamburger + Logo -->
        <div class="flex items-center gap-2">
            <!-- Hamburger Menu (mobile/tablet) -->
            <button 
                onclick="toggleSidebar()"
                class="lg:hidden p-2 text-neutral-600 hover:text-neutral-900 rounded-md hover:bg-neutral-200 transition-colors"
                aria-label="Menu"
            >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            
            <!-- Logo -->
            <svg width="164" height="164" viewBox="0 0 164 164" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 sm:w-8 sm:h-8">
                <path d="M75.4 163.3C30.5 163.3 0 126.7 0 87.8C0 48.3 31.1 14.2 72.5 12.6C74.1 12.5 75.5 13.9 75.5 15.5V27.6C75.5 29.1 74.3 30.4 72.7 30.5C42.3 31.9 17.8 56.8 17.8 87.9C17.8 118.3 41.8 145.5 75.4 145.5C108.1 145.5 131.3 119.4 132.7 90.6C132.8 89.1 134 87.8 135.6 87.8H147.7C149.3 87.8 150.6 89.1 150.6 90.8C149.2 129.2 118.3 163.3 75.4 163.3Z" fill="#1856ED"/>
                <path d="M75.5 123.3C55.5 123.3 40 107.4 40 87.8C40 69.5 54.1 54.2 72.4 52.7C74.1 52.6 75.5 53.9 75.5 55.6V67.7C75.5 69.1 74.5 70.4 73 70.6C64.2 71.8 57.8 79.3 57.8 87.9C57.8 97.5 65.3 105.6 75.5 105.6C84 105.6 91.6 99.2 92.8 90.4C93 89 94.3 87.9 95.7 87.9H107.8C109.5 87.9 110.8 89.3 110.7 91C109.1 108.9 94.1 123.3 75.5 123.3Z" fill="#1856ED"/>
                <path d="M145.2 73C143.8 43.7 120.4 19.5 90.3 18.1C88.8 18 87.5 16.8 87.5 15.2V3.20005C87.5 1.60005 88.8 0.300049 90.5 0.300049C129.6 1.80005 161.5 33.1 163 72.8C163.1 74.4 161.7 75.8 160.1 75.8H148C146.6 75.8 145.3 74.6 145.2 73Z" fill="#FF9E1A"/>
                <path d="M90.8 58.4001C89 58.1001 87.7 56.6001 87.7 55.1001V43.3001C87.7 41.6001 89.1 40.3001 90.8 40.4001C108.2 41.9001 121.6 55.8001 123.1 72.6001C123.2 74.3001 121.9 75.7001 120.2 75.7001H107.5C106.3 75.7001 105.4 74.9001 105.2 73.7001C104.3 66.6001 98.9 59.8001 90.8 58.4001Z" fill="#FF9E1A"/>
            </svg>
        </div>
        
        <!-- Right Side - Actions -->
        <div class="flex items-center gap-1 sm:gap-2">
            <!-- AI Button - Icon only on mobile -->
            <button onclick="openAIAssistant('general')" class="p-2 sm:px-3 sm:py-1.5 text-main-900 bg-gradient-to-r from-main-50 to-accent-100 hover:from-main-100 hover:to-accent-200 border border-main-200 rounded-md font-medium text-sm transition-colors flex items-center gap-2">
                <svg width="0" height="0" aria-hidden="true"><defs><linearGradient id="ai-gradient-btn-v12" x1="0" y1="0" x2="24" y2="24" gradientUnits="userSpaceOnUse"><stop stop-color="#186ded"></stop><stop stop-color="#875bf7" offset="85%"></stop></linearGradient></defs></svg>
                <svg class="w-4 h-4" fill="none" stroke="url(#ai-gradient-btn-v12)" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"></path><path d="M20 3v4"></path><path d="M22 5h-4"></path><path d="M4 17v2"></path><path d="M5 18H3"></path></svg>
                <span class="hidden sm:inline">AI assistant</span>
            </button>
            
            <!-- Help Button -->
            <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-200 rounded-md transition-colors" aria-label="Help">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"/>
                </svg>
            </button>

            <!-- Avatar / Account Switcher -->
            <div class="relative">
                <button onclick="toggleUserMenu()" class="flex items-center gap-1 sm:gap-2 hover:bg-neutral-200 rounded-full p-1 sm:pl-1.5 sm:pr-2 transition-colors">
                <div class="w-7 h-7 sm:w-8 sm:h-8 bg-neutral-800 rounded-full flex items-center justify-center">
                    <span class="text-xs sm:text-sm font-medium text-white">UG</span>
                </div>
                <span class="text-sm font-medium text-neutral-900 hidden md:inline">UPS Global</span>
                <svg class="w-4 h-4 text-neutral-600 hidden md:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
                </svg>
            </button>
            
                <!-- User Dropdown Menu -->
                <div id="user-menu" class="hidden absolute right-0 top-full mt-2 w-64 bg-white rounded-xl shadow-xl border border-neutral-200 py-3 z-[100]">
                    <!-- New Experience Toggle -->
                    <div class="px-4 pb-3 mb-2 border-b border-neutral-100 flex items-center justify-between">
                        <span class="text-sm font-medium text-neutral-800">New experience</span>
                        <button onclick="toggleNewExperience()" class="relative w-12 h-7 bg-main-600 rounded-full transition-colors">
                            <span class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow transform translate-x-5 transition-transform"></span>
                        </button>
                    </div>
                    
                    <!-- Menu Items -->
                    <a href="#settings" class="flex items-center gap-3 px-4 py-2.5 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors">
                        <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        <span>Settings</span>
                    </a>
                    <a href="#tools" class="flex items-center gap-3 px-4 py-2.5 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors">
                        <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"/></svg>
                        <span>Tools</span>
                    </a>
                    <a href="#plans" class="flex items-center gap-3 px-4 py-2.5 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors">
                        <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span>Plans and pricing</span>
                    </a>
                    <a href="#feedback" class="flex items-center gap-3 px-4 py-2.5 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors">
                        <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                        <span>Feedback</span>
                        <svg class="w-4 h-4 text-neutral-300 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                    </a>
                    
                    <div class="border-t border-neutral-100 my-2"></div>
                    
                    <a href="#logout" class="flex items-center gap-3 px-4 py-2.5 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors">
                        <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                        <span>Log out</span>
                    </a>
                    
                    <!-- Footer Links -->
                    <div class="border-t border-neutral-100 mt-2 pt-3 px-4">
                        <div class="flex items-center gap-4 text-xs text-neutral-500">
                            <a href="#privacy" class="hover:text-neutral-700 underline">Privacy</a>
                            <a href="#terms" class="hover:text-neutral-700 underline">Terms</a>
                            <a href="#cookies" class="hover:text-neutral-700 underline">Cookies</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Help Icon - Production Style -->
            <button onclick="toggleHelpPanel()" class="hidden sm:inline-flex items-center justify-center rounded-lg transition-colors focus:outline-none hover:bg-neutral-200 p-2.5" aria-label="Help">
                <div class="relative inline-flex items-center justify-center rounded-full outline outline-1.5 outline-offset-0 outline-main-300">
                    <svg stroke="currentColor" fill="currentColor" stroke-width="1.5" viewBox="0 0 512 512" class="w-6 h-6 opacity-80 text-main-600" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                        <path fill="none" stroke-miterlimit="10" stroke-width="32" d="M256 80a176 176 0 1 0 176 176A176 176 0 0 0 256 80z"></path>
                        <path fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="28" d="M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296"></path>
                        <circle cx="250" cy="348" r="20"></circle>
                </svg>
                </div>
            </button>
        </div>
    </nav>
    
    <!-- Help & Training Panel (Slide-in) -->
    <div id="help-panel" class="hidden fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-2xl z-[100] transform translate-x-full transition-transform duration-300">
        <div class="flex flex-col h-full">
            <!-- Header -->
            <div class="flex items-center justify-between px-5 py-4 border-b border-neutral-200">
                <h2 class="text-lg font-semibold text-neutral-900">Help & Training</h2>
                <button onclick="toggleHelpPanel()" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                    <svg class="w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            </div>
            
            <!-- Search -->
            <div class="px-5 py-4">
                <div class="relative">
                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                    <input type="text" placeholder="Search Knowledge Base" class="w-full pl-10 pr-4 py-2.5 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-main-500 focus:border-transparent" />
                </div>
            </div>
            
            <!-- Content -->
            <div class="flex-1 overflow-y-auto px-5 pb-5">
                <!-- Popular Articles -->
                <div class="mb-6">
                    <h3 class="text-sm font-semibold text-neutral-900 mb-3">Popular articles</h3>
                    <div class="space-y-2">
                        <a href="#" class="block text-sm text-main-600 hover:text-main-700 hover:underline">Create and send an SMS marketing message</a>
                        <a href="#" class="block text-sm text-main-600 hover:text-main-700 hover:underline">Create a Social Post and schedule it to publish on social media</a>
                    </div>
                </div>
                
                <!-- Looking for something else -->
                <div class="mb-6">
                    <h3 class="text-sm font-semibold text-neutral-900 mb-3">Looking for something else?</h3>
                    <div class="space-y-1">
                        <a href="#" class="flex items-center gap-3 py-2 text-sm text-neutral-700 hover:text-neutral-900">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                            <span>Get Product Training</span>
                        </a>
                        <a href="#" class="flex items-center gap-3 py-2 text-sm text-neutral-700 hover:text-neutral-900">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                            <span>Get Partnership Training</span>
                        </a>
                        <a href="#" class="flex items-center gap-3 py-2 text-sm text-neutral-700 hover:text-neutral-900">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                            <span>Browse Knowledge Base</span>
                        </a>
                        <a href="#" class="flex items-center gap-3 py-2 text-sm text-neutral-700 hover:text-neutral-900">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                            <span>Watch "How tos" on Youtube</span>
                        </a>
                    </div>
                </div>
                
                <p class="text-sm text-neutral-600 mb-4">Share Screen</p>
                
                <!-- Action Buttons -->
                <div class="space-y-3">
                    <a href="#" class="flex items-center justify-between px-4 py-3 border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors">
                        <span class="text-sm font-medium text-neutral-800">Contact Us</span>
                        <svg class="w-4 h-4 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    </a>
                    <a href="#" class="flex items-center justify-between px-4 py-3 border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors">
                        <span class="text-sm font-medium text-neutral-800">Visit Help Center</span>
                        <svg class="w-4 h-4 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div id="help-panel-backdrop" class="hidden fixed inset-0 bg-black/30 z-[90]" onclick="toggleHelpPanel()"></div>

    <!-- Main Container -->
    <div class="flex min-h-screen pb-20">
        <!-- Sidebar Backdrop (Mobile) -->
        <div 
            id="sidebar-backdrop" 
            class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
            onclick="toggleSidebar()"
        ></div>
        
        <!-- Left Sidebar Navigation - Rendered by component -->
        <aside 
            id="sidebar"
            class="fixed lg:static inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 transition-all duration-300 ease-in-out z-50 lg:z-auto w-64 bg-white border-r border-neutral-200 flex flex-col relative group sidenav-expanded overflow-visible"
        >
            <div id="sidebar-content" class="relative h-full overflow-visible"></div>
        </aside>
        <script src="components/left-nav.js"></script>

        <!-- Main Content Area - North Star Dashboard -->
        <main class="flex-1 overflow-y-auto">
            <!-- Hero Header with Gradient - extends behind widgets -->
            <div class="relative">
                <!-- Gradient Background - fades out vertically -->
                <div class="absolute inset-0 h-64" style="background: linear-gradient(100deg, #4f8cda 0%, #5ba8b8 25%, #6dbf9e 50%, #8dd4a8 75%, #b8e6c4 100%); -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%); mask-image: linear-gradient(to bottom, black 50%, transparent 100%);"></div>
                
                <!-- Header Content - minimal spacing -->
                <div class="relative px-8 pt-6 pb-4">
                                </div>
                        
                <!-- Dashboard Content - widgets float on gradient -->
                <div class="relative px-8 pt-4 pb-6">
                    <div class="max-w-7xl mx-auto">
                        <!-- AI Insights Carousel - Full Width at Top -->
                        <div class="ai-insights-carousel rounded-2xl shadow-sm overflow-hidden mb-5" style="background: linear-gradient(135deg, #f5f0ff 0%, #ede9fe 50%, #e0edff 100%);">
                            <!-- Single Row Layout -->
                            <div class="px-4 py-3 flex items-center gap-3">
                                <!-- AI Icon -->
                                <div class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0" style="background: linear-gradient(135deg, #875bf7 0%, #186ded 100%);">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/></svg>
                                </div>
                                
                                <!-- Insight Content (Carousel) -->
                                <div class="flex-1 min-w-0 relative overflow-hidden">
                                    <div id="insights-slider" class="flex transition-transform duration-300 ease-out">
                                        <p class="insight-slide w-full flex-shrink-0 text-sm text-neutral-700"><span class="font-semibold text-success-700 hover:underline cursor-pointer">Greenway Market MA</span> is performing <span class="font-semibold text-success-600">+20%</span> above average.</p>
                                        <p class="insight-slide w-full flex-shrink-0 text-sm text-neutral-700"><span class="font-semibold text-main-700 hover:underline cursor-pointer">Living Root Kitchen NY</span> campaign template is driving results.</p>
                                        <p class="insight-slide w-full flex-shrink-0 text-sm text-neutral-700"><span class="font-semibold text-warning-600">2 teams</span> haven't sent a campaign in 10 days.</p>
                                    </div>
                                </div>
                                
                                <!-- Actions & Nav -->
                                <div class="flex items-center gap-2 flex-shrink-0">
                                    <!-- Thumbs -->
                                    <button onclick="rateInsight(this, 'up')" class="p-1.5 rounded text-neutral-400 hover:text-success-600 hover:bg-white/50 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/></svg>
                                    </button>
                                    <button onclick="rateInsight(this, 'down')" class="p-1.5 rounded text-neutral-400 hover:text-danger-600 hover:bg-white/50 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"/></svg>
                                    </button>
                                    
                                    <div class="w-px h-4 bg-neutral-300/50 mx-1"></div>
                                    
                                    <!-- Dots -->
                                    <div class="flex gap-1">
                                        <button onclick="goToInsight(0)" class="insight-dot w-1.5 h-1.5 rounded-full bg-accent-500 transition-colors"></button>
                                        <button onclick="goToInsight(1)" class="insight-dot w-1.5 h-1.5 rounded-full bg-neutral-400/50 hover:bg-neutral-500 transition-colors"></button>
                                        <button onclick="goToInsight(2)" class="insight-dot w-1.5 h-1.5 rounded-full bg-neutral-400/50 hover:bg-neutral-500 transition-colors"></button>
                                    </div>
                                    
                                    <!-- Nav Arrows -->
                                    <button onclick="prevInsight()" class="p-1 rounded hover:bg-white/50 transition-colors text-neutral-500">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                                    </button>
                                    <button onclick="nextInsight()" class="p-1 rounded hover:bg-white/50 transition-colors text-neutral-500">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Dashboard Grid - Responsive Layout -->
                        <div class="dashboard-grid">
                            <!-- Left Column -->
                            <div class="dashboard-column">
                                <!-- Today's Checklist -->
                                <div class="checklist-card bg-white rounded-2xl border border-neutral-100 shadow-sm overflow-hidden">
                                    <!-- Header -->
                                    <div class="px-5 py-4 border-b border-neutral-100">
                                        <div class="flex items-center gap-3">
                                            <div class="w-8 h-8 rounded-full flex items-center justify-center" style="background: linear-gradient(135deg, #468af1 0%, #186ded 100%);">
                                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                                            </div>
                        <div>
                                                <h3 class="text-base font-semibold text-neutral-800">Today's checklist</h3>
                                                <p class="text-xs text-neutral-500">3 items need your attention</p>
                                            </div>
                                        </div>
                                </div>
                        
                                    <!-- Checklist Items -->
                                    <div class="divide-y divide-neutral-100">
                                        <!-- Item 1: Review Campaigns -->
                                        <button onclick="aiPrecheckAll()" class="w-full px-5 py-4 flex items-center gap-4 hover:bg-neutral-50 transition-colors group text-left">
                                            <div class="w-6 h-6 rounded-full border-2 border-main-300 flex items-center justify-center flex-shrink-0 group-hover:border-main-500 transition-colors">
                                                <span class="text-xs font-bold text-main-500">3</span>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="text-sm font-medium text-neutral-800 group-hover:text-main-600 transition-colors">Review campaigns awaiting approval</p>
                                                <p class="text-xs text-neutral-500 mt-0.5">3 campaigns need AI precheck</p>
                                            </div>
                                            <svg class="w-5 h-5 text-neutral-400 group-hover:text-main-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                        </button>
                                        
                                        <!-- Item 2: Compliance - Unsubscribe Issues -->
                                        <button onclick="openCompliancePanel('unsubscribe')" class="w-full px-5 py-4 flex items-center gap-4 hover:bg-neutral-50 transition-colors group text-left">
                                            <div class="w-6 h-6 rounded-full border-2 border-danger-400 flex items-center justify-center flex-shrink-0 group-hover:border-danger-600 transition-colors">
                                                <svg class="w-3 h-3 text-danger-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div class="flex items-center gap-2">
                                                    <p class="text-sm font-medium text-neutral-800 group-hover:text-danger-600 transition-colors">Unsubscribe link missing</p>
                                                    <span class="px-1.5 py-0.5 text-[10px] font-semibold rounded bg-danger-100 text-danger-700">Compliance</span>
                                                </div>
                                                <p class="text-xs text-neutral-500 mt-0.5">1 draft missing required unsubscribe link</p>
                                            </div>
                                            <svg class="w-5 h-5 text-neutral-400 group-hover:text-danger-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                        </button>
                                        
                                        <!-- Item 3: Compliance - Consent Expiring -->
                                        <button onclick="openCompliancePanel('consent')" class="w-full px-5 py-4 flex items-center gap-4 hover:bg-neutral-50 transition-colors group text-left">
                                            <div class="w-6 h-6 rounded-full border-2 border-warning-400 flex items-center justify-center flex-shrink-0 group-hover:border-warning-500 transition-colors">
                                                <svg class="w-3 h-3 text-warning-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div class="flex items-center gap-2">
                                                    <p class="text-sm font-medium text-neutral-800 group-hover:text-warning-600 transition-colors">Consent expiring soon</p>
                                                    <span class="px-1.5 py-0.5 text-[10px] font-semibold rounded bg-warning-100 text-warning-700">GDPR</span>
                                                </div>
                                                <p class="text-xs text-neutral-500 mt-0.5">247 contacts need re-consent within 30 days</p>
                                            </div>
                                            <svg class="w-5 h-5 text-neutral-400 group-hover:text-warning-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                        </button>
                                </div>
                </div>

                        <!-- Account Performance -->
                        <div class="leaderboard-card bg-white rounded-2xl border border-neutral-100 p-5 shadow-sm flex flex-col">
                            <div class="flex items-start justify-between mb-4">
                                <!-- Dynamic Title + Subtitle -->
                        <div>
                                    <h3 id="leaderboard-title" class="text-base font-medium text-neutral-800">Account performance</h3>
                                    <p id="leaderboard-subtitle" class="text-xs text-neutral-500 mt-0.5">by click rate in the last 30 days</p>
                                </div>
                        
                                <!-- Unified Filter Button -->
                                <div class="relative flex-shrink-0">
                                    <button onclick="toggleUnifiedFilter()" class="p-2 rounded-lg hover:bg-neutral-100 transition-colors text-neutral-500 hover:text-neutral-700" title="Filter options">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/></svg>
                                    </button>
                                    
                                    <!-- Unified Filter Menu -->
                                    <div id="unified-filter-menu" class="hidden absolute right-0 top-full mt-1 w-52 bg-white rounded-xl shadow-xl border border-neutral-200 z-[80] flex flex-col">
                                        <!-- Scrollable Content -->
                                        <div class="overflow-y-auto py-2" style="max-height: 280px;">
                                        <!-- Sort Section -->
                                        <div class="px-3 py-1.5">
                                            <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-2">Sort by</p>
                                            <div class="space-y-0.5">
                                                <button onclick="setUnifiedSort('highest')" class="unified-sort-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-sort="highest">
                                                    <svg class="unified-sort-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Highest first</span>
                                        </button>
                                                <button onclick="setUnifiedSort('lowest')" class="unified-sort-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-sort="lowest">
                                                    <svg class="unified-sort-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Lowest first</span>
                                        </button>
                        </div>
                                        </div>
                                        
                                        <div class="border-t border-neutral-100 my-2"></div>
                                        
                                        <!-- Date Range Section -->
                                        <div class="px-3 py-1.5">
                                            <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-2">Time period</p>
                                            <div class="space-y-0.5">
                                                <button onclick="setUnifiedDateRange('7d')" class="unified-range-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-range="7d">
                                                    <svg class="unified-range-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Last 7 days</span>
                                        </button>
                                                <button onclick="setUnifiedDateRange('30d')" class="unified-range-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-range="30d">
                                                    <svg class="unified-range-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Last 30 days</span>
                                        </button>
                                                <button onclick="setUnifiedDateRange('90d')" class="unified-range-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-range="90d">
                                                    <svg class="unified-range-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Last 90 days</span>
                            </button>
                                </div>
                </div>

                                        <div class="border-t border-neutral-100 my-2"></div>
                                        
                                        <!-- Performance Type Section -->
                                        <div class="px-3 py-1.5">
                                            <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-2">Compare by</p>
                                            <div class="space-y-0.5">
                                                <button onclick="setUnifiedPerformanceType('account')" class="unified-type-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-type="account">
                                                    <svg class="unified-type-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Account performance</span>
                                        </button>
                                                <button onclick="setUnifiedPerformanceType('email')" class="unified-type-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-type="email">
                                                    <svg class="unified-type-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Email campaigns</span>
                                        </button>
                                                <button onclick="setUnifiedPerformanceType('sms')" class="unified-type-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-type="sms">
                                                    <svg class="unified-type-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>SMS campaigns</span>
                                        </button>
                                                <button onclick="setUnifiedPerformanceType('automation')" class="unified-type-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-type="automation">
                                                    <svg class="unified-type-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Automations</span>
                                        </button>
                                            </div>
                                        </div>
                                        
                                        <div class="border-t border-neutral-100 my-2"></div>
                                        
                                        <!-- Metric Section -->
                                        <div class="px-3 py-1.5">
                                            <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-2">Metric</p>
                                            <div id="unified-metric-options" class="space-y-0.5">
                                                <button onclick="setUnifiedMetric('open_rate')" class="unified-metric-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-metric="open_rate">
                                                    <svg class="unified-metric-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Open rate</span>
                                        </button>
                                                <button onclick="setUnifiedMetric('click_rate')" class="unified-metric-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-metric="click_rate">
                                                    <svg class="unified-metric-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Click rate</span>
                                        </button>
                                                <button onclick="setUnifiedMetric('bounce_rate')" class="unified-metric-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-metric="bounce_rate">
                                                    <svg class="unified-metric-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                                    <span>Bounce rate</span>
                                        </button>
                                                <button onclick="setUnifiedMetric('unsubscribe_rate')" class="unified-metric-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-metric="unsubscribe_rate">
                                                    <svg class="unified-metric-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Unsubscribe rate</span>
                                        </button>
                                            </div>
                                        </div>
                                        </div>
                                        
                                        <!-- Sticky Footer -->
                                        <div class="border-t border-neutral-100 px-3 py-2 bg-neutral-50 rounded-b-xl">
                                            <button onclick="saveFilterDefaults()" class="w-full text-center text-xs font-medium text-main-600 hover:text-main-700 py-1.5 hover:bg-main-50 rounded-lg transition-colors">
                                                Save as default
                                        </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Highest -->
                            <p class="text-xs font-medium text-neutral-500 mb-2">Highest</p>
                            <div id="leaderboard-highest" class="space-y-3 mb-5">
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 min-w-[120px] flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-success-600 flex-shrink-0"></div>
                                        <span id="high-1-name" class="text-sm text-neutral-700">UPS New Jersey</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="high-1-bar" class="h-full rounded-full bg-success-600 transition-all" style="width: 85%"></div>
                                    </div>
                                    <span id="high-1-value" class="text-xs text-neutral-500 w-10 text-right">8.2%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-success-500"></div>
                                        <span id="high-2-name" class="text-sm text-neutral-700 truncate">UPS New York</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="high-2-bar" class="h-full rounded-full bg-success-500 transition-all" style="width: 72%"></div>
                                    </div>
                                    <span id="high-2-value" class="text-xs text-neutral-500 w-10 text-right">7.1%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-success-400"></div>
                                        <span id="high-3-name" class="text-sm text-neutral-700 truncate">UPS Connecticut</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="high-3-bar" class="h-full rounded-full bg-success-400 transition-all" style="width: 58%"></div>
                                    </div>
                                    <span id="high-3-value" class="text-xs text-neutral-500 w-10 text-right">5.8%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-success-400"></div>
                                        <span id="high-4-name" class="text-sm text-neutral-700 truncate">UPS California</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="high-4-bar" class="h-full rounded-full bg-success-400 transition-all" style="width: 52%"></div>
                                    </div>
                                    <span id="high-4-value" class="text-xs text-neutral-500 w-10 text-right">5.2%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-success-300"></div>
                                        <span id="high-5-name" class="text-sm text-neutral-700 truncate">UPS Texas</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="high-5-bar" class="h-full rounded-full bg-success-300 transition-all" style="width: 48%"></div>
                                    </div>
                                    <span id="high-5-value" class="text-xs text-neutral-500 w-10 text-right">4.8%</span>
                                </div>
                            </div>

                            <!-- Lowest -->
                            <p class="text-xs font-medium text-neutral-500 mb-2 hidden">Lowest</p>
                            <div id="leaderboard-lowest" class="space-y-3 hidden">
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-warning-400"></div>
                                        <span id="low-1-name" class="text-sm text-neutral-700 truncate">UPS Vermont</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="low-1-bar" class="h-full rounded-full bg-warning-400 transition-all" style="width: 18%; min-width: 6px"></div>
                                    </div>
                                    <span id="low-1-value" class="text-xs text-neutral-500 w-10 text-right">1.8%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-warning-400"></div>
                                        <span id="low-2-name" class="text-sm text-neutral-700 truncate">UPS Rhode Island</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="low-2-bar" class="h-full rounded-full bg-warning-400 transition-all" style="width: 22%; min-width: 6px"></div>
                                    </div>
                                    <span id="low-2-value" class="text-xs text-neutral-500 w-10 text-right">2.2%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-warning-400"></div>
                                        <span id="low-3-name" class="text-sm text-neutral-700 truncate">UPS Maine</span>
                                    </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="low-3-bar" class="h-full rounded-full bg-warning-400 transition-all" style="width: 28%; min-width: 6px"></div>
                                    </div>
                                    <span id="low-3-value" class="text-xs text-neutral-500 w-10 text-right">2.8%</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-warning-300"></div>
                                        <span id="low-4-name" class="text-sm text-neutral-700 truncate">UPS New Hampshire</span>
                            </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="low-4-bar" class="h-full rounded-full bg-warning-300 transition-all" style="width: 32%; min-width: 6px"></div>
                            </div>
                                    <span id="low-4-value" class="text-xs text-neutral-500 w-10 text-right">3.2%</span>
                        </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-2 w-28 flex-shrink-0">
                                        <div class="w-2 h-2 rounded-full bg-warning-300"></div>
                                        <span id="low-5-name" class="text-sm text-neutral-700 truncate">UPS Delaware</span>
                            </div>
                                    <div class="flex-1 h-1.5 bg-neutral-100 rounded-full">
                                        <div id="low-5-bar" class="h-full rounded-full bg-warning-300 transition-all" style="width: 36%; min-width: 6px"></div>
                                                </div>
                                    <span id="low-5-value" class="text-xs text-neutral-500 w-10 text-right">3.6%</span>
                                            </div>
                                        </div>
                            <!-- Footer -->
                            <div class="mt-auto pt-3 flex items-center justify-end gap-1.5">
                                <div class="relative group">
                                    <button class="text-neutral-400 hover:text-neutral-600 transition-colors">
                                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                                </button>
                                    <!-- Tooltip -->
                                    <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-neutral-800 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all whitespace-nowrap z-50">
                                        Benchmark based on overall accounts average from previous date range
                                                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-neutral-800"></div>
                                                </div>
                                            </div>
                                <p id="performance-benchmark" class="text-xs text-neutral-500">Based on benchmark of 4.6%</p>
                                        </div>
                                    </div>

                        <!-- Email Engagement - Monarch style with prominent numbers -->
                        <div class="metrics-card bg-white rounded-2xl border border-neutral-100 pt-5 px-5 pb-6 shadow-sm" style="height: 220px;">
                            <div class="flex items-start justify-between mb-4">
                                    <div>
                                    <h3 id="email-title" class="text-base font-medium text-neutral-800">Email engagement</h3>
                                    <p id="email-subtitle" class="text-xs text-neutral-500 mt-0.5">in the last 30 days</p>
                                                </div>
                                <!-- Filter Button -->
                                <div class="relative flex-shrink-0">
                                    <button onclick="toggleCardFilter('email')" class="p-2 rounded-lg hover:bg-neutral-100 transition-colors text-neutral-500 hover:text-neutral-700" title="Filter options">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/></svg>
                                    </button>
                                    <div id="email-filter-menu" class="hidden absolute right-0 top-full mt-1 w-36 bg-white rounded-xl shadow-xl border border-neutral-200 py-2 z-[80]">
                                        <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider px-3 py-1.5">Time period</p>
                                        <button onclick="setCardFilter('email', '7d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="7d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 7 days</span>
                                        </button>
                                        <button onclick="setCardFilter('email', '30d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="30d">
                                            <svg class="card-filter-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 30 days</span>
                                        </button>
                                        <button onclick="setCardFilter('email', '90d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="90d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 90 days</span>
                                        </button>
                                            </div>
                                        </div>
                                    </div>
                            <div class="grid grid-cols-2 gap-x-4 gap-y-3">
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="email-sends" class="text-xl font-bold text-neutral-900">1,260</p>
                                            <span class="change-indicator positive"><span id="email-sends-trend">+8%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 18 L8 14 L14 16 L20 10 L26 12 L32 8 L38 6 L46 4" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                    </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Sends</p>
                                            </div>
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="email-opens" class="text-xl font-bold text-neutral-900">460</p>
                                            <span class="change-indicator positive"><span id="email-opens-trend">+12%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 20 L8 16 L14 18 L20 12 L26 10 L32 8 L38 5 L46 2" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Opens</p>
                                            </div>
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="email-clicks" class="text-xl font-bold text-neutral-900">432</p>
                                            <span class="change-indicator positive"><span id="email-clicks-trend">+5%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 16 L8 15 L14 14 L20 13 L26 12 L32 10 L38 9 L46 7" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                        </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Clicks</p>
                                    </div>
                                <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="email-bounces" class="text-xl font-bold text-neutral-900">32</p>
                                            <span class="change-indicator negative"><span id="email-bounces-trend">-1%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 10 L8 11 L14 10 L20 12 L26 11 L32 13 L38 12 L46 14" stroke="#f04438" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                        </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Bounces</p>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Growth - Monarch style with prominent numbers -->
                        <div class="metrics-card bg-white rounded-2xl border border-neutral-100 pt-5 px-5 pb-6 shadow-sm" style="height: 220px;">
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h3 id="contacts-title" class="text-base font-medium text-neutral-800">Contact growth</h3>
                                    <p id="contacts-subtitle" class="text-xs text-neutral-500 mt-0.5">in the last 30 days</p>
                                </div>
                                <!-- Filter Button -->
                                <div class="relative flex-shrink-0">
                                    <button onclick="toggleCardFilter('contacts')" class="p-2 rounded-lg hover:bg-neutral-100 transition-colors text-neutral-500 hover:text-neutral-700" title="Filter options">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/></svg>
                                    </button>
                                    <div id="contacts-filter-menu" class="hidden absolute right-0 top-full mt-1 w-36 bg-white rounded-xl shadow-xl border border-neutral-200 py-2 z-[80]">
                                        <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider px-3 py-1.5">Time period</p>
                                        <button onclick="setCardFilter('contacts', '7d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="7d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 7 days</span>
                                        </button>
                                        <button onclick="setCardFilter('contacts', '30d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="30d">
                                            <svg class="card-filter-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 30 days</span>
                                        </button>
                                        <button onclick="setCardFilter('contacts', '90d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="90d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 90 days</span>
                                </button>
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-x-4 gap-y-3">
                                <!-- Total contacts -->
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="contact-total" class="text-xl font-bold text-neutral-900">42,580</p>
                                            <span class="change-indicator positive"><span id="contact-total-trend">+3%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 18 L8 16 L14 17 L20 14 L26 13 L32 11 L38 9 L46 6" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Total contacts</p>
                                </div>
                                <!-- New contacts -->
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="contact-new" class="text-xl font-bold text-neutral-900">1,321</p>
                                            <span class="change-indicator positive"><span id="contact-new-trend">+6%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 20 L8 18 L14 16 L20 15 L26 12 L32 10 L38 6 L46 3" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">New contacts</p>
                                </div>
                                <!-- Active -->
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="contact-active" class="text-xl font-bold text-neutral-900">38,240</p>
                                            <span class="change-indicator positive"><span id="contact-active-trend">+4%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 17 L8 15 L14 16 L20 13 L26 12 L32 10 L38 8 L46 6" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Active</p>
                                </div>
                                <!-- Unsubscribes -->
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="contact-unsub" class="text-xl font-bold text-neutral-900">68</p>
                                            <span class="change-indicator negative"><span id="contact-unsub-trend">+2%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 8 L8 10 L14 9 L20 12 L26 11 L32 14 L38 13 L46 16" stroke="#f04438" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Unsubscribes</p>
                                            </div>
                                        </div>
                                    </div>

                        <!-- SMS Engagement - Monarch style with prominent numbers -->
                        <div class="metrics-card bg-white rounded-2xl border border-neutral-100 pt-5 px-5 pb-6 shadow-sm" style="height: 220px;">
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h3 id="sms-title" class="text-base font-medium text-neutral-800">SMS engagement</h3>
                                    <p id="sms-subtitle" class="text-xs text-neutral-500 mt-0.5">in the last 30 days</p>
                                </div>
                                <!-- Filter Button -->
                                <div class="relative flex-shrink-0">
                                    <button onclick="toggleCardFilter('sms')" class="p-2 rounded-lg hover:bg-neutral-100 transition-colors text-neutral-500 hover:text-neutral-700" title="Filter options">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/></svg>
                                    </button>
                                    <div id="sms-filter-menu" class="hidden absolute right-0 top-full mt-1 w-36 bg-white rounded-xl shadow-xl border border-neutral-200 py-2 z-[80]">
                                        <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider px-3 py-1.5">Time period</p>
                                        <button onclick="setCardFilter('sms', '7d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="7d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 7 days</span>
                                        </button>
                                        <button onclick="setCardFilter('sms', '30d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="30d">
                                            <svg class="card-filter-check w-4 h-4 text-main-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 30 days</span>
                                        </button>
                                        <button onclick="setCardFilter('sms', '90d')" class="card-filter-btn w-full text-left px-3 py-1.5 text-sm hover:bg-neutral-50 flex items-center gap-2" data-range="90d">
                                            <svg class="card-filter-check w-4 h-4 text-transparent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                                            <span>Last 90 days</span>
                                        </button>
                            </div>
                        </div>
                            </div>
                            <div class="grid grid-cols-2 gap-x-4 gap-y-3">
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="sms-sends" class="text-xl font-bold text-neutral-900">892</p>
                                            <span class="change-indicator positive"><span id="sms-sends-trend">+15%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 20 L8 17 L14 15 L20 12 L26 9 L32 6 L38 4 L46 2" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Sends</p>
                                            </div>
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="sms-delivered" class="text-xl font-bold text-neutral-900">856</p>
                                            <span class="change-indicator positive"><span id="sms-delivered-trend">+14%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 20 L8 18 L14 15 L20 13 L26 10 L32 7 L38 5 L46 3" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Delivered</p>
                                            </div>
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="sms-clicks" class="text-xl font-bold text-neutral-900">124</p>
                                            <span class="change-indicator positive"><span id="sms-clicks-trend">+22%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 22 L8 18 L14 16 L20 12 L26 8 L32 5 L38 3 L46 2" stroke="#17b26a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Clicks</p>
                                            </div>
                                    <div>
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-baseline gap-2">
                                            <p id="sms-optouts" class="text-xl font-bold text-neutral-900">8</p>
                                            <span class="change-indicator negative"><span id="sms-optouts-trend">-3%</span></span>
                                        </div>
                                        <svg class="w-12 h-6" viewBox="0 0 48 24" fill="none"><path d="M2 14 L8 13 L14 14 L20 12 L26 13 L32 11 L38 12 L46 10" stroke="#f04438" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </div>
                                    <p class="text-xs text-neutral-500 mt-0.5 uppercase tracking-wide">Opt-outs</p>
                                </div>
                            </div>
                        </div>
                    </div>

                            <!-- Right Column -->
                            <div class="dashboard-column right-col">
                        <!-- Campaign Schedule (Monarch-style) -->
                        <div class="activity-card bg-white rounded-2xl border border-neutral-100 shadow-sm overflow-hidden">
                            <!-- Header -->
                            <div class="flex items-center justify-between px-4 py-3 border-b border-neutral-100">
                                <h3 class="text-sm font-semibold text-neutral-800">Upcoming</h3>
                                <button class="text-xs font-medium text-main-600 hover:text-main-700">View all</button>
                            </div>
                            
                            <!-- Campaign List -->
                            <div class="divide-y divide-neutral-100">
                                <!-- Campaign 1 -->
                                <button class="w-full px-4 py-3 flex items-center gap-3 hover:bg-neutral-50 transition-colors text-left group">
                                    <div class="flex-shrink-0 w-10 text-center">
                                        <p class="text-[10px] font-medium text-neutral-500 uppercase">Feb</p>
                                        <p class="text-lg font-bold text-neutral-800">11</p>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium text-neutral-800 group-hover:text-main-600 transition-colors truncate">Winter Sale Newsletter</p>
                                        <p class="text-xs text-neutral-500 mt-0.5">Greenway Market MA Â· 12,450 recipients</p>
                                    </div>
                                    <span class="text-[10px] px-2 py-1 rounded-full bg-neutral-100 text-neutral-600 font-medium">Email</span>
                                </button>
                                
                                <!-- Campaign 2 -->
                                <button class="w-full px-4 py-3 flex items-center gap-3 hover:bg-neutral-50 transition-colors text-left group">
                                    <div class="flex-shrink-0 w-10 text-center">
                                        <p class="text-[10px] font-medium text-neutral-500 uppercase">Feb</p>
                                        <p class="text-lg font-bold text-neutral-800">12</p>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium text-neutral-800 group-hover:text-main-600 transition-colors truncate">Flash Sale Alert</p>
                                        <p class="text-xs text-neutral-500 mt-0.5">PureField Produce NJ Â· 3,200 recipients</p>
                                    </div>
                                    <span class="text-[10px] px-2 py-1 rounded-full bg-neutral-100 text-neutral-600 font-medium">SMS</span>
                                </button>
                                
                                <!-- Campaign 3 - Featured -->
                                <button class="w-full px-4 py-3 flex items-center gap-3 hover:bg-neutral-50 transition-colors text-left group bg-neutral-50">
                                    <div class="flex-shrink-0 w-10 text-center">
                                        <p class="text-[10px] font-medium text-neutral-500 uppercase">Feb</p>
                                        <p class="text-lg font-bold text-neutral-800">14</p>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-semibold text-neutral-900 group-hover:text-main-600 transition-colors truncate">Valentine's Day Promo</p>
                                        <p class="text-xs text-neutral-500 mt-0.5">All accounts Â· 145,000 recipients</p>
                                    </div>
                                    <span class="text-[10px] px-2 py-1 rounded-full bg-main-100 text-main-700 font-medium">Email</span>
                                </button>
                                
                                <!-- Campaign 4 -->
                                <button class="w-full px-4 py-3 flex items-center gap-3 hover:bg-neutral-50 transition-colors text-left group">
                                    <div class="flex-shrink-0 w-10 text-center">
                                        <p class="text-[10px] font-medium text-neutral-500 uppercase">Feb</p>
                                        <p class="text-lg font-bold text-neutral-800">15</p>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium text-neutral-800 group-hover:text-main-600 transition-colors truncate">Presidents Day Preview</p>
                                        <p class="text-xs text-neutral-500 mt-0.5">Living Root Kitchen CT Â· 8,200 recipients</p>
                                    </div>
                                    <span class="text-[10px] px-2 py-1 rounded-full bg-neutral-100 text-neutral-600 font-medium">Email</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const backdrop = document.getElementById('sidebar-backdrop');
            
            sidebar.classList.toggle('-translate-x-full');
            backdrop.classList.toggle('hidden');
        }
        
        // Toggle user menu dropdown
        function toggleUserMenu() {
            const menu = document.getElementById('user-menu');
            menu.classList.toggle('hidden');
        }
        
        // Toggle help panel
        function toggleHelpPanel() {
            const panel = document.getElementById('help-panel');
            const backdrop = document.getElementById('help-panel-backdrop');
            
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                backdrop.classList.remove('hidden');
                setTimeout(() => {
                    panel.classList.remove('translate-x-full');
                }, 10);
            } else {
                panel.classList.add('translate-x-full');
                setTimeout(() => {
                    panel.classList.add('hidden');
                    backdrop.classList.add('hidden');
                }, 300);
            }
        }
        
        // Toggle new experience
        function toggleNewExperience() {
            showToast('Experience preference updated');
        }
        
        // Close user menu when clicking outside
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('user-menu');
            const userBtn = e.target.closest('[onclick="toggleUserMenu()"]');
            if (!userBtn && userMenu && !userMenu.contains(e.target)) {
                userMenu.classList.add('hidden');
            }
        });

        function toggleAccounts() {
            const menu = document.getElementById('accounts-menu');
            const chevron = document.getElementById('accounts-chevron');
            menu.classList.toggle('hidden');
            chevron.classList.toggle('rotate-180');
        }

        function toggleChannels() {
            const menu = document.getElementById('channels-menu');
            const chevron = document.getElementById('channels-chevron');
            menu.classList.toggle('hidden');
            chevron.classList.toggle('rotate-180');
        }

        // Developer Mode Toggle
        let devModeEnabled = false;
        let spacingEnabled = false;
        
        function toggleDevMode() {
            devModeEnabled = !devModeEnabled;
            const body = document.body;
            const toggle = document.getElementById('dev-mode-toggle');
            const label = document.getElementById('dev-mode-label');
            
            if (devModeEnabled) {
                body.classList.add('dev-mode');
                toggle.classList.remove('bg-neutral-800', 'text-neutral-500');
                toggle.classList.add('bg-purple-600', 'text-white');
                label.textContent = 'Dev Mode ON';
            } else {
                body.classList.remove('dev-mode', 'dev-spacing');
                toggle.classList.remove('bg-purple-600', 'text-white');
                toggle.classList.add('bg-neutral-800', 'text-neutral-500');
                label.textContent = 'Dev Mode';
                // Reset sub-toggles
                spacingEnabled = false;
                document.getElementById('spacing-toggle').classList.remove('active');
                // Close gesture panel
                document.getElementById('gesture-panel').classList.add('hidden');
                document.getElementById('gesture-toggle').classList.remove('active', 'gestures');
            }
        }
        
        // Gesture Simulator
        let gesturePanelOpen = false;
        const gestureLog = [];
        
        function toggleGesturePanel() {
            gesturePanelOpen = !gesturePanelOpen;
            const panel = document.getElementById('gesture-panel');
            const toggle = document.getElementById('gesture-toggle');
            
            if (gesturePanelOpen) {
                panel.classList.remove('hidden');
                toggle.classList.add('active', 'gestures');
            } else {
                panel.classList.add('hidden');
                toggle.classList.remove('active', 'gestures');
            }
        }
        
        function simulateGesture(type) {
            const indicator = document.getElementById('gesture-indicator');
            const visual = document.getElementById('gesture-visual');
            
            // Log the gesture
            logGesture(type);
            
            // Show visual feedback
            indicator.classList.remove('hidden');
            visual.style.left = '50%';
            visual.style.top = '40%';
            visual.style.transform = 'translate(-50%, -50%)';
            
            // Create appropriate visual
            visual.innerHTML = '';
            
            if (type.startsWith('swipe')) {
                const swipeEl = document.createElement('div');
                swipeEl.className = 'gesture-swipe-indicator gesture-' + type;
                visual.appendChild(swipeEl);
            } else {
                const ripple = document.createElement('div');
                ripple.className = 'gesture-ripple';
                visual.appendChild(ripple);
            }
            
            // Trigger the actual gesture action
            handleGestureAction(type);
            
            // Hide after animation
            setTimeout(() => {
                indicator.classList.add('hidden');
            }, 600);
        }
        
        function handleGestureAction(type) {
            switch(type) {
                case 'swipe-left':
                    nextInsightSlide();
                    showToast('Swipe Left â†’ Next slide');
                    break;
                case 'swipe-right':
                    prevInsightSlide();
                    showToast('Swipe Right â†’ Previous slide');
                    break;
                case 'swipe-up':
                    showToast('Swipe Up gesture detected');
                    break;
                case 'swipe-down':
                    showToast('Swipe Down gesture detected');
                    break;
                case 'tap':
                    showToast('Tap gesture detected');
                    break;
                case 'double-tap':
                    showToast('Double Tap â†’ Quick action');
                    break;
                case 'long-press':
                    showToast('Long Press â†’ Context menu');
                    break;
                case 'pinch-in':
                    showToast('Pinch In â†’ Zoom out');
                    break;
                case 'pinch-out':
                    showToast('Pinch Out â†’ Zoom in');
                    break;
                case 'pull-refresh':
                    refreshInsights();
                    showToast('Pull to Refresh â†’ Reloading data...');
                    break;
            }
        }
        
        function logGesture(type) {
            const log = document.getElementById('gesture-log');
            const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const entry = document.createElement('p');
            entry.className = 'text-neutral-300';
            entry.innerHTML = `<span class="text-neutral-500">${time}</span> ${type.replace('-', ' ')}`;
            
            // Clear placeholder
            if (log.querySelector('.text-neutral-600')) {
                log.innerHTML = '';
            }
            
            log.insertBefore(entry, log.firstChild);
            
            // Keep only last 5 entries
            while (log.children.length > 5) {
                log.removeChild(log.lastChild);
            }
        }
        
        function toggleSpacing() {
            if (!devModeEnabled) return;
            
            spacingEnabled = !spacingEnabled;
            const body = document.body;
            const toggle = document.getElementById('spacing-toggle');
            
            if (spacingEnabled) {
                body.classList.add('dev-spacing');
                toggle.classList.add('active');
            } else {
                body.classList.remove('dev-spacing');
                toggle.classList.remove('active');
            }
        }

        // Date Range Switcher
        let currentDateRange = '30d';
        
        const dateRangeData = {
            '7d': {
                label: '7 days',
                email: { sends: '312', opens: '124', clicks: '98', bounces: '8', sendsTrend: '+5%', opensTrend: '+8%', clicksTrend: '+3%', bouncesTrend: '-2%' },
                contacts: { total: '42,180', new: '289', active: '37,840', unsub: '14', totalTrend: '+1%', newTrend: '+4%', activeTrend: '+2%', unsubTrend: '-1%' },
                sms: { sends: '198', delivered: '192', clicks: '32', optouts: '2', sendsTrend: '+12%', deliveredTrend: '+11%', clicksTrend: '+18%', optoutsTrend: '-1%' },
                performance: { subtitle: 'Click rate 7-day benchmark: 4.2%' },
                insights: [
                    { text: '<span class="font-medium ">UPS Massachusetts</span> open rate is up <span class="font-medium ">+12%</span> vs last week.', cta: 'See report' },
                    { text: '<span class="font-medium ">3 campaigns</span> scheduled to send today across <span class="font-medium ">2 accounts</span>.', cta: 'View schedule' },
                    { text: 'SMS delivery rate at <span class="font-medium ">97.1%</span> â€” above benchmark.', cta: 'View SMS stats' }
                ],
                activity: [
                    { type: 'email', title: 'Email campaign sent', account: 'UPS Global', initials: 'GL', color: 'success-600', time: '2 hours ago', stats: { opens: '847', clicks: '98', ctr: '11.6%' }, img: 'assets/email2.png' },
                    { type: 'sms', title: 'SMS campaign sent', account: 'UPS Southwest', initials: 'SW', color: 'emerald-500', time: '5 hours ago', stats: { delivered: '423', clicks: '52', ctr: '12.3%' }, img: 'assets/sms1.png' },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS Connecticut', initials: 'CT', color: 'main-500', time: '1 day ago', stats: { opens: '612', clicks: '71', ctr: '11.6%' }, img: 'assets/email4.png' }
                ]
            },
            '30d': {
                label: '30 days',
                email: { sends: '1,260', opens: '460', clicks: '432', bounces: '32', sendsTrend: '+8%', opensTrend: '+12%', clicksTrend: '+5%', bouncesTrend: '-1%' },
                contacts: { total: '42,580', new: '1,321', active: '38,240', unsub: '68', totalTrend: '+3%', newTrend: '+6%', activeTrend: '+4%', unsubTrend: '+2%' },
                sms: { sends: '892', delivered: '856', clicks: '124', optouts: '8', sendsTrend: '+15%', deliveredTrend: '+14%', clicksTrend: '+22%', optoutsTrend: '-3%' },
                performance: { subtitle: 'Click rate 30-day benchmark: 4.6%' },
                insights: [
                    { text: '<span class="font-medium ">UPS Massachusetts</span> is performing <span class="font-medium ">+20%</span> above its 30â€‘day average.', cta: 'See report' },
                    { text: 'Engagement increased after the <span class="font-medium ">Jan 12 Holiday Campaign</span> in <span class="font-medium ">UPS New York</span>.', cta: 'Replicate strategy' },
                    { text: '<span class="font-medium ">2 teams</span> haven\'t sent a campaign in 10 days: <span class="font-medium ">UPS Rhode Island</span> and <span class="font-medium ">UPS Vermont</span>.', cta: 'Nudge teams' }
                ],
                activity: [
                    { type: 'pending', title: 'Campaign approval request', account: 'UPS Greenwich', initials: 'GR', color: 'accent-500', time: '5 m ago', stats: null, img: 'assets/email1.png', pending: true },
                    { type: 'email', title: 'Email campaign scheduled', account: 'UPS NE Region', initials: 'NE', color: 'main-500', time: '1 day ago', stats: null, img: 'assets/email3.png', schedule: { date: 'Feb 5, 9:00 AM', list: 'Newsletter Subscribers' } },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS Global', initials: 'GL', color: 'success-600', time: '2 days ago', stats: { opens: '2,847', clicks: '412', ctr: '14.5%' }, img: 'assets/email2.png' },
                    { type: 'sms', title: 'SMS campaign sent', account: 'UPS Southwest', initials: 'SW', color: 'emerald-500', time: '3 days ago', stats: { delivered: '1,245', clicks: '189', ctr: '15.2%' }, img: 'assets/sms1.png' },
                    { type: 'social', title: 'Social campaign published', account: 'UPS NE Region', initials: 'NE', color: 'violet-500', time: '4 days ago', stats: { reach: '847', engagements: '126', rate: '14.9%' }, img: 'assets/social1.png' },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS Connecticut', initials: 'CT', color: 'main-500', time: '5 days ago', stats: { opens: '1,523', clicks: '198', ctr: '13.0%' }, img: 'assets/email4.png' }
                ]
            },
            '90d': {
                label: '90 days',
                email: { sends: '4,128', opens: '1,584', clicks: '1,248', bounces: '98', sendsTrend: '+12%', opensTrend: '+18%', clicksTrend: '+8%', bouncesTrend: '-4%' },
                contacts: { total: '44,892', new: '4,512', active: '39,847', unsub: '245', totalTrend: '+8%', newTrend: '+15%', activeTrend: '+9%', unsubTrend: '+5%' },
                sms: { sends: '2,847', delivered: '2,712', clicks: '412', optouts: '28', sendsTrend: '+24%', deliveredTrend: '+22%', clicksTrend: '+35%', optoutsTrend: '-8%' },
                performance: { subtitle: 'Click rate 90-day benchmark: 4.8%' },
                insights: [
                    { text: 'Overall engagement is up <span class="font-medium ">+18%</span> quarter over quarter.', cta: 'View trends' },
                    { text: '<span class="font-medium ">UPS California</span> leads with <span class="font-medium ">22% CTR</span> â€” highest in organization.', cta: 'See breakdown' },
                    { text: '<span class="font-medium ">5 accounts</span> exceeded their quarterly goals. <span class="font-medium ">3 accounts</span> need attention.', cta: 'Review goals' }
                ],
                activity: [
                    { type: 'pending', title: 'Campaign approval request', account: 'UPS Greenwich', initials: 'GR', color: 'accent-500', time: '5 m ago', stats: null, img: 'assets/email1.png', pending: true },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS Global', initials: 'GL', color: 'success-600', time: '2 days ago', stats: { opens: '8,412', clicks: '1,247', ctr: '14.8%' }, img: 'assets/email2.png' },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS New York', initials: 'NY', color: 'main-600', time: '1 week ago', stats: { opens: '5,847', clicks: '892', ctr: '15.3%' }, img: 'assets/email3.png' },
                    { type: 'sms', title: 'SMS campaign sent', account: 'UPS Southwest', initials: 'SW', color: 'emerald-500', time: '2 weeks ago', stats: { delivered: '4,128', clicks: '612', ctr: '14.8%' }, img: 'assets/sms1.png' },
                    { type: 'email', title: 'Email campaign sent', account: 'UPS California', initials: 'CA', color: 'success-500', time: '3 weeks ago', stats: { opens: '12,847', clicks: '2,847', ctr: '22.1%' }, img: 'assets/email4.png' },
                    { type: 'social', title: 'Social campaign published', account: 'UPS NE Region', initials: 'NE', color: 'violet-500', time: '1 month ago', stats: { reach: '3,412', engagements: '487', rate: '14.3%' }, img: 'assets/social1.png' }
                ]
            }
        };
        
        function setDateRange(range) {
            currentDateRange = range;
            const data = dateRangeData[range];
            
            // Update button states
            document.querySelectorAll('.date-range-btn').forEach(btn => {
                btn.classList.remove('text-neutral-900', 'bg-white', 'shadow-md');
                btn.classList.add('text-neutral-500', 'hover:text-neutral-700', 'hover:bg-neutral-50');
            });
            const activeBtn = document.getElementById(`range-${range}`);
            activeBtn.classList.remove('text-neutral-500', 'hover:text-neutral-700', 'hover:bg-neutral-50');
            activeBtn.classList.add('text-neutral-900', 'bg-white', 'shadow-md');
            
            // Update Email Engagement widget
            updateMetricValue('email-sends', data.email.sends, data.email.sendsTrend);
            updateMetricValue('email-opens', data.email.opens, data.email.opensTrend);
            updateMetricValue('email-clicks', data.email.clicks, data.email.clicksTrend);
            updateMetricValue('email-bounces', data.email.bounces, data.email.bouncesTrend);
            
            // Update Contact Growth widget
            updateMetricValue('contact-total', data.contacts.total, data.contacts.totalTrend);
            updateMetricValue('contact-new', data.contacts.new, data.contacts.newTrend);
            updateMetricValue('contact-active', data.contacts.active, data.contacts.activeTrend);
            updateMetricValue('contact-unsub', data.contacts.unsub, data.contacts.unsubTrend);
            
            // Update SMS Engagement widget
            updateMetricValue('sms-sends', data.sms.sends, data.sms.sendsTrend);
            updateMetricValue('sms-delivered', data.sms.delivered, data.sms.deliveredTrend);
            updateMetricValue('sms-clicks', data.sms.clicks, data.sms.clicksTrend);
            updateMetricValue('sms-optouts', data.sms.optouts, data.sms.optoutsTrend);
            
            // Update Account Performance benchmark footer
            const perfBenchmark = document.getElementById('performance-benchmark');
            if (perfBenchmark) {
                const benchmarkValue = range === '7d' ? '4.2%' : range === '30d' ? '4.6%' : '4.8%';
                perfBenchmark.textContent = `Based on benchmark of ${benchmarkValue}`;
            }
            
            // AI Insights title stays static as "today's insights"
            
            // Update AI Insights
            updateAIInsights(data.insights);
            
            // Update Activity Log
            updateActivityLog(data.activity);
        }
        
        // Card-specific date range data
        const cardDateRangeData = {
            performance: {
                '1w': { benchmark: '4.2%' },
                '1m': { benchmark: '4.6%' },
                '3m': { benchmark: '4.8%' }
            },
            email: {
                '1w': { sends: '312', opens: '124', clicks: '98', bounces: '8', sendsTrend: '+5%', opensTrend: '+8%', clicksTrend: '+3%', bouncesTrend: '-2%' },
                '1m': { sends: '1,260', opens: '460', clicks: '432', bounces: '32', sendsTrend: '+8%', opensTrend: '+12%', clicksTrend: '+5%', bouncesTrend: '-1%' },
                '3m': { sends: '4,128', opens: '1,584', clicks: '1,248', bounces: '98', sendsTrend: '+12%', opensTrend: '+18%', clicksTrend: '+8%', bouncesTrend: '-4%' }
            },
            contacts: {
                '1w': { total: '42,180', new: '289', active: '37,840', unsub: '14', totalTrend: '+1%', newTrend: '+4%', activeTrend: '+2%', unsubTrend: '-1%' },
                '1m': { total: '42,580', new: '1,321', active: '38,240', unsub: '68', totalTrend: '+3%', newTrend: '+6%', activeTrend: '+4%', unsubTrend: '+2%' },
                '3m': { total: '44,892', new: '4,512', active: '39,847', unsub: '245', totalTrend: '+8%', newTrend: '+15%', activeTrend: '+9%', unsubTrend: '+5%' }
            },
            sms: {
                '1w': { sends: '285', delivered: '278', clicks: '42', optouts: '3', sendsTrend: '+4%', deliveredTrend: '+5%', clicksTrend: '+6%', optoutsTrend: '-1%' },
                '1m': { sends: '892', delivered: '876', clicks: '145', optouts: '12', sendsTrend: '+6%', deliveredTrend: '+7%', clicksTrend: '+9%', optoutsTrend: '+1%' },
                '3m': { sends: '2,845', delivered: '2,798', clicks: '486', optouts: '38', sendsTrend: '+10%', deliveredTrend: '+11%', clicksTrend: '+14%', optoutsTrend: '+2%' }
            },
            leaderboard: {
                '1w': {
                    highest: [
                        { name: 'UPS California', value: '6.1%', width: '78%' },
                        { name: 'UPS Texas', value: '5.4%', width: '68%' },
                        { name: 'UPS Florida', value: '4.9%', width: '62%' }
                    ],
                    lowest: [
                        { name: 'UPS Alaska', value: '1.2%', width: '15%' },
                        { name: 'UPS Montana', value: '1.6%', width: '20%' },
                        { name: 'UPS Wyoming', value: '1.9%', width: '24%' }
                    ]
                },
                '1m': {
                    highest: [
                        { name: 'UPS New Jersey', value: '8.2%', width: '85%' },
                        { name: 'UPS New York', value: '7.1%', width: '72%' },
                        { name: 'UPS Connecticut', value: '5.8%', width: '58%' }
                    ],
                    lowest: [
                        { name: 'UPS Vermont', value: '1.8%', width: '18%' },
                        { name: 'UPS Rhode Island', value: '2.2%', width: '22%' },
                        { name: 'UPS Maine', value: '2.8%', width: '28%' }
                    ]
                },
                '3m': {
                    highest: [
                        { name: 'UPS Massachusetts', value: '9.4%', width: '92%' },
                        { name: 'UPS New Jersey', value: '8.8%', width: '86%' },
                        { name: 'UPS New York', value: '7.6%', width: '74%' }
                    ],
                    lowest: [
                        { name: 'UPS North Dakota', value: '2.1%', width: '21%' },
                        { name: 'UPS South Dakota', value: '2.4%', width: '24%' },
                        { name: 'UPS Nebraska', value: '2.9%', width: '29%' }
                    ]
                }
            }
        };
        
        function setCardDateRange(card, range) {
            // Update button states for this card
            const cardButtons = document.querySelectorAll(`[id^="${card}-range-"]`);
            cardButtons.forEach(btn => {
                btn.classList.remove('text-neutral-900', 'bg-white', 'shadow-sm');
                btn.classList.add('text-neutral-500', 'hover:text-neutral-700');
            });
            const activeBtn = document.getElementById(`${card}-range-${range}`);
            if (activeBtn) {
                activeBtn.classList.remove('text-neutral-500', 'hover:text-neutral-700');
                activeBtn.classList.add('text-neutral-900', 'bg-white', 'shadow-sm');
            }
            
            const data = cardDateRangeData[card]?.[range];
            if (!data) return;
            
            // Update card-specific metrics
            if (card === 'email') {
                updateMetricValue('email-sends', data.sends, data.sendsTrend);
                updateMetricValue('email-opens', data.opens, data.opensTrend);
                updateMetricValue('email-clicks', data.clicks, data.clicksTrend);
                updateMetricValue('email-bounces', data.bounces, data.bouncesTrend);
            } else if (card === 'contacts') {
                updateMetricValue('contact-total', data.total, data.totalTrend);
                updateMetricValue('contact-new', data.new, data.newTrend);
                updateMetricValue('contact-active', data.active, data.activeTrend);
                updateMetricValue('contact-unsub', data.unsub, data.unsubTrend);
            } else if (card === 'sms') {
                updateMetricValue('sms-sends', data.sends, data.sendsTrend);
                updateMetricValue('sms-delivered', data.delivered, data.deliveredTrend);
                updateMetricValue('sms-clicks', data.clicks, data.clicksTrend);
                updateMetricValue('sms-optouts', data.optouts, data.optoutsTrend);
            } else if (card === 'performance') {
                const perfBenchmark = document.getElementById('performance-benchmark');
                if (perfBenchmark) {
                    perfBenchmark.textContent = `Based on benchmark of ${data.benchmark}`;
                }
            }
        }
        
        // Unified column date range function
        function setColumnDateRange(range) {
            // Update button states
            document.querySelectorAll('.column-range-btn').forEach(btn => {
                btn.classList.remove('text-neutral-900', 'bg-neutral-100', 'shadow-sm');
                btn.classList.add('text-neutral-500', 'hover:text-neutral-700');
            });
            const activeBtn = document.getElementById(`column-range-${range}`);
            if (activeBtn) {
                activeBtn.classList.remove('text-neutral-500', 'hover:text-neutral-700');
                activeBtn.classList.add('text-neutral-900', 'bg-neutral-100', 'shadow-sm');
            }
            
            // Map to existing data format
            const dataRange = range === '1w' ? '1w' : range === '1m' ? '1m' : '3m';
            const data = cardDateRangeData;
            
            // Update all cards in the left column
            if (data.email?.[dataRange]) {
                const emailData = data.email[dataRange];
                updateMetricValue('email-sends', emailData.sends, emailData.sendsTrend);
                updateMetricValue('email-opens', emailData.opens, emailData.opensTrend);
                updateMetricValue('email-clicks', emailData.clicks, emailData.clicksTrend);
                updateMetricValue('email-bounces', emailData.bounces, emailData.bouncesTrend);
            }
            if (data.contacts?.[dataRange]) {
                const contactData = data.contacts[dataRange];
                updateMetricValue('contact-total', contactData.total, contactData.totalTrend);
                updateMetricValue('contact-new', contactData.new, contactData.newTrend);
                updateMetricValue('contact-active', contactData.active, contactData.activeTrend);
                updateMetricValue('contact-unsub', contactData.unsub, contactData.unsubTrend);
            }
            if (data.sms?.[dataRange]) {
                const smsData = data.sms[dataRange];
                updateMetricValue('sms-sends', smsData.sends, smsData.sendsTrend);
                updateMetricValue('sms-delivered', smsData.delivered, smsData.deliveredTrend);
                updateMetricValue('sms-clicks', smsData.clicks, smsData.clicksTrend);
                updateMetricValue('sms-optouts', smsData.optouts, smsData.optoutsTrend);
            }
            // Benchmark stays constant - does not change with date range
            
            // Update leaderboard
            if (data.leaderboard?.[dataRange]) {
                updateLeaderboard(data.leaderboard[dataRange]);
            }
        }
        
        // AI Insights Carousel
        let currentInsightSlide = 0;
        const totalInsightSlides = 3;
        
        function goToInsightSlide(index) {
            currentInsightSlide = index;
            updateInsightCarousel();
        }
        
        function nextInsightSlide() {
            currentInsightSlide = (currentInsightSlide + 1) % totalInsightSlides;
            updateInsightCarousel();
        }
        
        function prevInsightSlide() {
            currentInsightSlide = (currentInsightSlide - 1 + totalInsightSlides) % totalInsightSlides;
            updateInsightCarousel();
        }
        
        // Approval Requests Carousel
        let currentApprovalSlide = 0;
        let totalApprovalSlides = 4;
        
        function goToApprovalSlide(index) {
            currentApprovalSlide = index;
            updateApprovalCarousel();
        }
        
        function updateApprovalCarousel() {
            const slides = document.getElementById('approval-slides');
            if (slides) {
                slides.style.transform = `translateX(-${currentApprovalSlide * 100}%)`;
            }
            
            // Update dots
            document.querySelectorAll('.approval-dot').forEach((dot, i) => {
                if (i === currentApprovalSlide) {
                    dot.classList.remove('bg-neutral-300');
                    dot.classList.add('bg-neutral-800');
                } else {
                    dot.classList.remove('bg-neutral-800');
                    dot.classList.add('bg-neutral-300');
                }
            });
        }
        
        // Campaign Review Dialog
        function openCampaignReview(index, name, account, type) {
            const isEmail = type === 'email';
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4';
            modal.id = 'campaign-review-modal';
            modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
                    <!-- Header -->
                    <div class="px-6 py-4 border-b border-neutral-100 flex items-center justify-between bg-neutral-50">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-main-100 rounded-xl flex items-center justify-center">
                                ${isEmail ? '<svg class="w-5 h-5 text-main-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>' : '<svg class="w-5 h-5 text-main-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>'}
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-neutral-900">${name}</h3>
                                <p class="text-sm text-neutral-500">${account} â€¢ ${type.toUpperCase()} Campaign</p>
                            </div>
                        </div>
                        <button onclick="document.getElementById('campaign-review-modal').remove()" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                    
                    <!-- Content -->
                    <div class="flex-1 overflow-y-auto flex">
                        <!-- Preview Panel -->
                        <div class="flex-1 p-6 bg-neutral-100 flex items-center justify-center">
                            <div class="${isEmail ? 'w-[320px] h-[480px]' : 'w-[280px] h-[500px]'} bg-white rounded-2xl shadow-lg overflow-hidden border border-neutral-200">
                                ${isEmail ? `
                                    <div class="bg-main-600 text-white px-4 py-3 text-center">
                                        <p class="text-xs opacity-75">Email Preview</p>
                                    </div>
                                    <img src="assets/email1.png" alt="Email preview" class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h4 class="font-bold text-neutral-900 mb-2">${name}</h4>
                                        <p class="text-sm text-neutral-600 mb-4">Don't miss our incredible spring sale! Get up to 50% off on selected items...</p>
                                        <div class="bg-main-600 text-white text-center py-2 rounded-lg text-sm font-medium">Shop Now</div>
                                    </div>
                                ` : `
                                    <div class="bg-neutral-800 text-white px-4 py-2 flex items-center justify-between text-xs">
                                        <span>9:41</span>
                                        <div class="flex gap-1">
                                            <div class="w-4 h-2 bg-white rounded-sm"></div>
                                        </div>
                                    </div>
                                    <div class="p-4 flex-1">
                                        <div class="bg-main-100 rounded-2xl p-4 max-w-[90%]">
                                            <p class="text-sm text-neutral-800">ðŸŽ‰ Flash Sale! This weekend only - 30% off everything. Use code FLASH30. Shop now: bit.ly/sale</p>
                                        </div>
                                        <p class="text-xs text-neutral-400 mt-2 ml-2">Today 10:30 AM</p>
                                    </div>
                                `}
                            </div>
                        </div>
                        
                        <!-- Details Panel -->
                        <div class="w-80 border-l border-neutral-200 p-5 flex flex-col">
                            <!-- AI Precheck Status -->
                            <div class="mb-5">
                                <div class="flex items-center gap-2 mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="url(#review-gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <defs><linearGradient id="review-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#186ded"/><stop offset="100%" stop-color="#875bf7"/></linearGradient></defs>
                                        <path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6"/>
                                    </svg>
                                    <span class="text-sm font-semibold text-neutral-800">AI Precheck</span>
                                </div>
                                <div id="ai-check-status-${index}" class="space-y-2">
                                    <button onclick="runAIPrecheck(${index})" class="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-main-50 to-accent-50 hover:from-main-100 hover:to-accent-100 border border-main-200 rounded-xl transition-all text-sm font-medium text-main-700">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                        Run AI Precheck
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Campaign Details -->
                            <div class="flex-1">
                                <h4 class="text-xs font-semibold text-neutral-400 uppercase tracking-wider mb-3">Details</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-neutral-500">Submitted by</span>
                                        <span class="text-neutral-800 font-medium">Sarah M.</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-neutral-500">Time</span>
                                        <span class="text-neutral-800">2 hours ago</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-neutral-500">Recipients</span>
                                        <span class="text-neutral-800">12,450</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-neutral-500">Scheduled</span>
                                        <span class="text-neutral-800">Tomorrow, 9 AM</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Actions -->
                            <div class="border-t border-neutral-100 pt-4 mt-4 space-y-2">
                                <button onclick="approveCampaign(${index}); document.getElementById('campaign-review-modal').remove();" class="w-full px-4 py-2.5 bg-success-600 hover:bg-success-700 text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                                    Approve & Send
                                </button>
                                <button onclick="requestChanges(${index}); document.getElementById('campaign-review-modal').remove();" class="w-full px-4 py-2.5 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-medium rounded-xl transition-colors">
                                    Request Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function runAIPrecheck(index) {
            const container = document.getElementById(`ai-check-status-${index}`);
            if (!container) return;
            
            container.innerHTML = `
                <div class="flex items-center gap-2 text-main-600">
                    <svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span class="text-sm">Analyzing...</span>
                </div>
            `;
            
            setTimeout(() => {
                container.innerHTML = `
                    <div class="space-y-2">
                        <div class="flex items-start gap-2 p-2 bg-success-50 rounded-lg">
                            <svg class="w-4 h-4 text-success-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <div>
                                <p class="text-xs font-medium text-success-800">Brand Compliant</p>
                                <p class="text-xs text-success-600">Logo and colors match brand kit</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2 p-2 bg-success-50 rounded-lg">
                            <svg class="w-4 h-4 text-success-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <div>
                                <p class="text-xs font-medium text-success-800">No Errors Found</p>
                                <p class="text-xs text-success-600">Links and images verified</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2 p-2 bg-warning-50 rounded-lg">
                            <svg class="w-4 h-4 text-warning-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                            <div>
                                <p class="text-xs font-medium text-warning-800">Suggestion</p>
                                <p class="text-xs text-warning-600">Consider adding personalization</p>
                            </div>
                        </div>
                    </div>
                `;
            }, 1500);
        }
        
        function approveCampaign(index) {
            showToast('Campaign approved! It will be sent as scheduled.');
            removeApprovalSlide(index);
        }
        
        function requestChanges(index) {
            showToast('Change request sent to the campaign author.');
        }
        
        function removeApprovalSlide(index) {
            totalApprovalSlides--;
            document.getElementById('approval-count').textContent = totalApprovalSlides;
            
            if (currentApprovalSlide >= totalApprovalSlides) {
                currentApprovalSlide = Math.max(0, totalApprovalSlides - 1);
            }
            
            // For demo, just move to next slide
            if (totalApprovalSlides > 0) {
                goToApprovalSlide(currentApprovalSlide);
            }
        }
        
        function aiPrecheckAll() {
            showToast('AI Precheck started... Analyzing 4 campaigns for brand compliance, errors, and best practices.');
            
            // Simulate AI checking with loading state
            const btn = event.currentTarget;
            const originalContent = btn.innerHTML;
            btn.innerHTML = `
                <svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                <span class="text-sm font-semibold text-main-600">Analyzing campaigns...</span>
            `;
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalContent;
                btn.disabled = false;
                
                // Show results
                showAIPrecheckResults();
            }, 2500);
        }
        
        // AI Insights Carousel Navigation
        let currentInsight = 0;
        const totalInsights = 3;
        
        function updateInsightCarousel() {
            const slider = document.getElementById('insights-slider');
            const numDisplay = document.getElementById('current-insight-num');
            const dots = document.querySelectorAll('.insight-dot');
            
            if (slider) {
                slider.style.transform = `translateX(-${currentInsight * 100}%)`;
            }
            if (numDisplay) {
                numDisplay.textContent = currentInsight + 1;
            }
            dots.forEach((dot, i) => {
                if (i === currentInsight) {
                    dot.classList.remove('bg-neutral-300');
                    dot.classList.add('bg-accent-500');
                } else {
                    dot.classList.remove('bg-accent-500');
                    dot.classList.add('bg-neutral-300');
                }
            });
        }
        
        function nextInsight() {
            currentInsight = (currentInsight + 1) % totalInsights;
            updateInsightCarousel();
        }
        
        function prevInsight() {
            currentInsight = (currentInsight - 1 + totalInsights) % totalInsights;
            updateInsightCarousel();
        }
        
        function goToInsight(index) {
            currentInsight = index;
            updateInsightCarousel();
        }
        
        function openInsightsPanel() {
            // Open AI insights in a slide-out panel or modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4';
            modal.id = 'insights-panel-modal';
            modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-xl w-full max-h-[85vh] overflow-hidden flex flex-col">
                    <!-- Header -->
                    <div class="px-6 py-4 border-b border-neutral-100 flex items-center justify-between" style="background: linear-gradient(135deg, #f5f0ff 0%, #ede9fe 100%);">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-700 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-neutral-900">Today's Insights</h3>
                                <p class="text-sm text-neutral-500">AI-powered recommendations for your organization</p>
                            </div>
                        </div>
                        <button onclick="document.getElementById('insights-panel-modal').remove()" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                    
                    <!-- Insights List -->
                    <div class="flex-1 overflow-y-auto p-6 space-y-4">
                        <div class="p-4 bg-success-50 border border-success-200 rounded-xl">
                            <div class="flex items-start gap-3">
                                <div class="w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                                </div>
                                <div>
                                    <p class="text-sm text-neutral-700"><span class="font-semibold text-success-700">UPS Massachusetts</span> is performing <span class="font-semibold text-success-600">+20%</span> above its 30-day average.</p>
                                    <button class="mt-2 text-xs font-medium text-success-600 hover:text-success-700">See report â†’</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-main-50 border border-main-200 rounded-xl">
                            <div class="flex items-start gap-3">
                                <div class="w-8 h-8 bg-main-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-main-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                </div>
                                <div>
                                    <p class="text-sm text-neutral-700">Engagement increased after the <span class="font-semibold text-main-600">Jan 12 Holiday Campaign</span> in <span class="font-semibold">UPS New York</span>.</p>
                                    <button class="mt-2 text-xs font-medium text-main-600 hover:text-main-700">Replicate strategy â†’</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-warning-50 border border-warning-200 rounded-xl">
                            <div class="flex items-start gap-3">
                                <div class="w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-warning-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                </div>
                                <div>
                                    <p class="text-sm text-neutral-700"><span class="font-semibold text-warning-600">2 teams</span> haven't sent a campaign in 10 days: <span class="font-semibold">UPS Rhode Island</span> and <span class="font-semibold">UPS Vermont</span>.</p>
                                    <button class="mt-2 text-xs font-medium text-warning-600 hover:text-warning-700">Nudge teams â†’</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="px-6 py-4 border-t border-neutral-100 bg-neutral-50 flex items-center justify-between">
                        <p class="text-xs text-neutral-400">Refreshes daily at 6am</p>
                        <button onclick="document.getElementById('insights-panel-modal').remove()" class="px-4 py-2 bg-accent-600 hover:bg-accent-700 text-white text-sm font-medium rounded-lg transition-colors">Done</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Open Compliance Panel
        function openCompliancePanel(type) {
            const complianceData = {
                unsubscribe: {
                    title: 'Unsubscribe Link Missing',
                    description: 'The following draft is missing a required unsubscribe link per CAN-SPAM regulations.',
                    items: [
                        { name: 'Spring Sale Newsletter', account: 'Greenway Market CT', status: 'Draft' }
                    ],
                    action: 'Add unsubscribe link'
                },
                consent: {
                    title: 'Consent Expiring Soon',
                    description: 'These contacts need to re-confirm consent within 30 days per GDPR requirements.',
                    items: [
                        { name: 'Greenway Market MA', count: 89, daysLeft: 12 },
                        { name: 'Living Root Kitchen NY', count: 67, daysLeft: 18 },
                        { name: 'PureField Produce PA', count: 91, daysLeft: 25 }
                    ],
                    action: 'Send re-consent campaign'
                }
            };
            
            const data = complianceData[type];
            if (!data) return;
            
            // Create modal overlay
            const overlay = document.createElement('div');
            overlay.id = 'compliance-overlay';
            overlay.className = 'fixed inset-0 bg-black/50 z-[200] flex items-center justify-center p-4';
            overlay.onclick = (e) => { if (e.target === overlay) closeCompliancePanel(); };
            
            let itemsHtml = '';
            if (type === 'unsubscribe') {
                itemsHtml = data.items.map(item => `
                    <div class="flex items-center justify-between p-4 bg-neutral-50 rounded-lg">
                        <div>
                            <p class="text-sm font-medium text-neutral-800">${item.name}</p>
                            <p class="text-xs text-neutral-500">${item.account} Â· ${item.status}</p>
                        </div>
                        <button class="px-3 py-1.5 text-xs font-medium text-white bg-main-600 hover:bg-main-700 rounded-lg transition-colors">Edit draft</button>
                    </div>
                `).join('');
            } else if (type === 'consent') {
                itemsHtml = data.items.map(item => `
                    <div class="flex items-center justify-between p-4 bg-neutral-50 rounded-lg">
                        <div>
                            <p class="text-sm font-medium text-neutral-800">${item.name}</p>
                            <p class="text-xs text-neutral-500">${item.count} contacts Â· ${item.daysLeft} days remaining</p>
                        </div>
                        <button class="px-3 py-1.5 text-xs font-medium text-warning-700 bg-warning-100 hover:bg-warning-200 rounded-lg transition-colors">Re-consent</button>
                    </div>
                `).join('');
            }
            
            overlay.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden">
                    <div class="px-6 py-5 border-b border-neutral-100 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center ${type === 'unsubscribe' ? 'bg-danger-100' : 'bg-warning-100'}">
                                ${type === 'unsubscribe' 
                                    ? '<svg class="w-5 h-5 text-danger-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>'
                                    : '<svg class="w-5 h-5 text-warning-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>'
                                }
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-neutral-800">${data.title}</h3>
                                <p class="text-xs ${type === 'unsubscribe' ? 'text-danger-600' : 'text-warning-600'}">${type === 'unsubscribe' ? 'CAN-SPAM Compliance' : 'GDPR Compliance'}</p>
                            </div>
                        </div>
                        <button onclick="closeCompliancePanel()" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-neutral-600 mb-4">${data.description}</p>
                        <div class="space-y-3">
                            ${itemsHtml}
                        </div>
                    </div>
                    <div class="px-6 py-4 bg-neutral-50 border-t border-neutral-100 flex justify-end gap-3">
                        <button onclick="closeCompliancePanel()" class="px-4 py-2 text-sm font-medium text-neutral-600 hover:text-neutral-800 transition-colors">Dismiss</button>
                        <button class="px-4 py-2 text-sm font-medium text-white bg-main-600 hover:bg-main-700 rounded-lg transition-colors">${data.action}</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }
        
        function closeCompliancePanel() {
            const overlay = document.getElementById('compliance-overlay');
            if (overlay) overlay.remove();
        }
        
        function showAIPrecheckResults() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-4';
            modal.id = 'ai-precheck-modal';
            modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[85vh] overflow-hidden flex flex-col">
                    <!-- Header -->
                    <div class="px-6 py-4 border-b border-neutral-100 flex items-center justify-between" style="background: linear-gradient(135deg, #f0f7ff 0%, #f5f0ff 100%);">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-main-500 to-accent-500 rounded-xl flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-neutral-900">AI Precheck Complete</h3>
                                <p class="text-sm text-neutral-500">4 campaigns analyzed</p>
                            </div>
                        </div>
                        <button onclick="document.getElementById('ai-precheck-modal').remove()" class="p-2 hover:bg-neutral-100 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                    
                    <!-- Summary Stats -->
                    <div class="px-6 py-4 bg-neutral-50 border-b border-neutral-100 flex gap-4">
                        <div class="flex-1 text-center p-3 bg-success-50 rounded-xl border border-success-200">
                            <p class="text-2xl font-bold text-success-600">2</p>
                            <p class="text-xs text-success-700">Ready to approve</p>
                        </div>
                        <div class="flex-1 text-center p-3 bg-warning-50 rounded-xl border border-warning-200">
                            <p class="text-2xl font-bold text-warning-600">1</p>
                            <p class="text-xs text-warning-700">Needs review</p>
                        </div>
                        <div class="flex-1 text-center p-3 bg-danger-50 rounded-xl border border-danger-200">
                            <p class="text-2xl font-bold text-danger-600">1</p>
                            <p class="text-xs text-danger-700">Issues found</p>
                        </div>
                    </div>
                    
                    <!-- Campaign List -->
                    <div class="flex-1 overflow-y-auto p-4 space-y-3">
                        <!-- Campaign 1 - Ready -->
                        <div onclick="document.getElementById('ai-precheck-modal').remove(); openCampaignReview(0, 'Spring Sale Newsletter', 'UPS Massachusetts', 'email');" class="p-4 bg-white border border-success-200 rounded-xl hover:shadow-md transition-all cursor-pointer group">
                            <div class="flex items-center gap-4">
                                <img src="assets/email1.png" alt="" class="w-14 h-14 rounded-lg object-cover shadow-sm">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-success-500 rounded-full"></span>
                                        <p class="text-sm font-medium text-neutral-900">Spring Sale Newsletter</p>
                                    </div>
                                    <p class="text-xs text-neutral-500">UPS Massachusetts â€¢ Email</p>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Brand âœ“</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Links âœ“</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">A11y âœ“</span>
                                    </div>
                                </div>
                                <svg class="w-5 h-5 text-neutral-300 group-hover:text-main-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                            </div>
                        </div>
                        
                        <!-- Campaign 2 - Warning -->
                        <div onclick="document.getElementById('ai-precheck-modal').remove(); openCampaignReview(1, 'Monthly Customer Update', 'UPS New York', 'email');" class="p-4 bg-white border border-warning-200 rounded-xl hover:shadow-md transition-all cursor-pointer group">
                            <div class="flex items-center gap-4">
                                <img src="assets/email2.png" alt="" class="w-14 h-14 rounded-lg object-cover shadow-sm">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-warning-500 rounded-full"></span>
                                        <p class="text-sm font-medium text-neutral-900">Monthly Customer Update</p>
                                    </div>
                                    <p class="text-xs text-neutral-500">UPS New York â€¢ Email</p>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Brand âœ“</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-warning-100 text-warning-700 rounded-full">Subject âš </span>
                                    </div>
                                </div>
                                <svg class="w-5 h-5 text-neutral-300 group-hover:text-main-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                            </div>
                        </div>
                        
                        <!-- Campaign 3 - Error -->
                        <div onclick="document.getElementById('ai-precheck-modal').remove(); openCampaignReview(2, 'Weekend Flash SMS', 'UPS Rhode Island', 'sms');" class="p-4 bg-white border border-danger-200 rounded-xl hover:shadow-md transition-all cursor-pointer group">
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-lg bg-gradient-to-br from-main-100 to-main-200 flex items-center justify-center shadow-sm">
                                    <svg class="w-6 h-6 text-main-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-danger-500 rounded-full"></span>
                                        <p class="text-sm font-medium text-neutral-900">Weekend Flash SMS</p>
                                    </div>
                                    <p class="text-xs text-neutral-500">UPS Rhode Island â€¢ SMS</p>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="text-[10px] px-2 py-0.5 bg-danger-100 text-danger-700 rounded-full">No opt-out âœ—</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-danger-100 text-danger-700 rounded-full">Too long âœ—</span>
                                    </div>
                                </div>
                                <svg class="w-5 h-5 text-neutral-300 group-hover:text-main-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                            </div>
                        </div>
                        
                        <!-- Campaign 4 - Ready -->
                        <div onclick="document.getElementById('ai-precheck-modal').remove(); openCampaignReview(3, 'Product Launch Teaser', 'UPS Vermont', 'email');" class="p-4 bg-white border border-success-200 rounded-xl hover:shadow-md transition-all cursor-pointer group">
                            <div class="flex items-center gap-4">
                                <img src="assets/email3.png" alt="" class="w-14 h-14 rounded-lg object-cover shadow-sm">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-success-500 rounded-full"></span>
                                        <p class="text-sm font-medium text-neutral-900">Product Launch Teaser</p>
                                    </div>
                                    <p class="text-xs text-neutral-500">UPS Vermont â€¢ Email</p>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Brand âœ“</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Mobile âœ“</span>
                                        <span class="text-[10px] px-2 py-0.5 bg-success-100 text-success-700 rounded-full">Engaging âœ“</span>
                                    </div>
                                </div>
                                <svg class="w-5 h-5 text-neutral-300 group-hover:text-main-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer Actions -->
                    <div class="px-6 py-4 border-t border-neutral-100 flex items-center justify-between bg-white">
                        <button onclick="document.getElementById('ai-precheck-modal').remove()" class="px-4 py-2 text-neutral-600 hover:text-neutral-800 text-sm font-medium transition-colors">
                            Review Later
                        </button>
                        <div class="flex gap-2">
                            <button onclick="document.getElementById('ai-precheck-modal').remove(); showToast('Change requests sent for campaigns with issues');" class="px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 text-sm font-medium rounded-lg transition-colors">
                                Request Changes (2)
                            </button>
                            <button onclick="document.getElementById('ai-precheck-modal').remove(); approveCampaign(0); approveCampaign(3); showToast('Approved 2 campaigns that passed precheck');" class="px-4 py-2 bg-success-600 hover:bg-success-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                                Approve Passing (2)
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function updateInsightCarousel() {
            // Update slides
            document.querySelectorAll('.insight-slide').forEach((slide, i) => {
                if (i === currentInsightSlide) {
                    slide.classList.remove('hidden');
                    slide.classList.add('active');
                } else {
                    slide.classList.add('hidden');
                    slide.classList.remove('active');
                }
            });
            
            // Update dots
            document.querySelectorAll('.insight-dot').forEach((dot, i) => {
                if (i === currentInsightSlide) {
                    dot.classList.remove('bg-neutral-300');
                    dot.style.background = 'linear-gradient(135deg, #186ded, #875bf7)';
                } else {
                    dot.classList.add('bg-neutral-300');
                    dot.style.background = '';
                }
            });
        }
        
        // Refresh insights
        function refreshInsights() {
            const btn = event.currentTarget;
            const icon = btn.querySelector('svg');
            
            // Spin animation
            icon.style.transition = 'transform 0.5s ease';
            icon.style.transform = 'rotate(360deg)';
            
            setTimeout(() => {
                icon.style.transform = 'rotate(0deg)';
            }, 500);
            
            showToast('Insights refreshed');
        }
        
        // Auto-advance carousel every 5 seconds
        setInterval(() => {
            nextInsightSlide();
        }, 5000);
        
        // Touch swipe support for mobile - entire card is swipable
        (function() {
            const card = document.getElementById('ai-insights-card');
            if (!card) return;
            
            let touchStartX = 0;
            let touchEndX = 0;
            const minSwipeDistance = 50;
            
            card.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            
            card.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });
            
            function handleSwipe() {
                const diff = touchStartX - touchEndX;
                if (Math.abs(diff) < minSwipeDistance) return;
                
                if (diff > 0) {
                    // Swipe left - next slide
                    nextInsightSlide();
                } else {
                    // Swipe right - previous slide
                    prevInsightSlide();
                }
            }
        })();
        
        // Toggle refresh time menu
        function toggleRefreshMenu() {
            const menu = document.getElementById('refresh-time-menu');
            menu.classList.toggle('hidden');
        }
        
        // Set refresh time
        function setRefreshTime(time) {
            const label = document.getElementById('refresh-time-label');
            const menu = document.getElementById('refresh-time-menu');
            
            if (label) {
                const timeLabels = {
                    '6am': '6am',
                    '9am': '9am',
                    '12pm': '12pm',
                    '6pm': '6pm'
                };
                label.textContent = 'refreshes daily at ' + (timeLabels[time] || time);
            }
            
            // Update checkmarks
            document.querySelectorAll('.refresh-time-option').forEach(btn => {
                const check = btn.querySelector('.refresh-time-check');
                if (btn.dataset.time === time) {
                    check.classList.remove('text-transparent');
                    check.classList.add('text-main-600');
                } else {
                    check.classList.remove('text-main-600');
                    check.classList.add('text-transparent');
                }
            });
            
            // Close menu
            if (menu) menu.classList.add('hidden');
            
            showToast('Refresh time updated to ' + time.toUpperCase());
        }
        
        // Close refresh menu when clicking outside
        document.addEventListener('click', function(e) {
            const container = document.getElementById('refresh-time-container');
            const menu = document.getElementById('refresh-time-menu');
            if (container && menu && !container.contains(e.target)) {
                menu.classList.add('hidden');
            }
        });
        
        function updateAIInsights(insights) {
            const container = document.getElementById('ai-insights-list');
            if (!container || !insights) return;
            
            container.innerHTML = insights.map(insight => `
                <div class="bg-neutral-50 rounded-lg p-3 hover:bg-neutral-100 transition-colors group">
                    <p class="text-sm text-neutral-700 mb-2">${insight.text}</p>
                    <div class="flex items-center justify-end">
                        <div class="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="rateInsight(this, 'up')" class="p-1.5 rounded text-neutral-400 hover:text-success-600 hover:bg-success-50 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/></svg></button>
                            <button onclick="rateInsight(this, 'down')" class="p-1.5 rounded text-neutral-400 hover:text-danger-600 hover:bg-danger-50 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"/></svg></button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function updateActivityLog(activities) {
            const container = document.getElementById('activity-list');
            if (!container || !activities) return;
            
            container.innerHTML = activities.map(item => {
                const statsHtml = item.stats ? `
                    <div class="flex items-center gap-3 mb-3 text-xs text-neutral-500">
                        ${item.stats.opens ? `<span><span class="font-medium text-neutral-700">${item.stats.opens}</span> opens</span>` : ''}
                        ${item.stats.delivered ? `<span><span class="font-medium text-neutral-700">${item.stats.delivered}</span> delivered</span>` : ''}
                        ${item.stats.reach ? `<span><span class="font-medium text-neutral-700">${item.stats.reach}</span> reach</span>` : ''}
                        ${item.stats.clicks ? `<span><span class="font-medium text-neutral-700">${item.stats.clicks}</span> clicks</span>` : ''}
                        ${item.stats.engagements ? `<span><span class="font-medium text-neutral-700">${item.stats.engagements}</span> engagements</span>` : ''}
                        ${item.stats.ctr ? `<span><span class="font-medium text-success-600">${item.stats.ctr}</span> CTR</span>` : ''}
                        ${item.stats.rate ? `<span><span class="font-medium text-success-600">${item.stats.rate}</span> rate</span>` : ''}
                    </div>
                ` : '';
                
                const scheduleHtml = item.schedule ? `
                    <div class="flex items-center gap-3 mb-3 text-xs text-neutral-500">
                        <span class="flex items-center gap-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                            ${item.schedule.date}
                        </span>
                        <span class="flex items-center gap-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                            ${item.schedule.list}
                        </span>
                    </div>
                ` : '';
                
                const pendingDot = item.pending ? '<div class="absolute top-3 right-3 w-2.5 h-2.5 bg-warning-400 rounded-full"></div>' : '';
                const actionText = item.pending ? 'Review campaign' : (item.type === 'social' ? 'View post' : (item.title.includes('scheduled') ? 'View campaign' : 'View report'));
                const hasDetails = item.stats || item.schedule;
                
                return `
                    <div class="activity-item bg-white rounded-xl p-4 shadow-sm border border-neutral-100 hover:shadow-md transition-shadow relative" data-type="${item.type}">
                        ${pendingDot}
                        <div class="flex gap-4">
                            <img src="${item.img}" alt="Preview" class="w-20 h-24 rounded-lg object-cover flex-shrink-0 shadow-sm">
                            <div class="flex-1 min-w-0 flex flex-col">
                                <p class="text-sm font-medium text-neutral-700 mb-2">${item.title}</p>
                                <div class="flex items-center gap-1.5 mb-${hasDetails ? '2' : '3'}">
                                    <div class="w-5 h-5 bg-${item.color} rounded-full flex items-center justify-center text-white text-[10px] font-bold flex-shrink-0">${item.initials}</div>
                                    <span class="text-xs text-neutral-500">${item.account}</span>
                                </div>
                                ${statsHtml}
                                ${scheduleHtml}
                                <div class="flex items-center justify-between mt-auto">
                                    <button class="text-xs font-medium text-main-600 hover:text-main-700">${actionText}</button>
                                    <span class="text-xs text-neutral-400">${item.time}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function updateMetricValue(id, value, trend) {
            const el = document.getElementById(id);
            if (el) {
                el.textContent = value;
            }
            const trendEl = document.getElementById(`${id}-trend`);
            if (trendEl) {
                trendEl.textContent = trend;
            }
        }

        // Activity Filter Dropdown
        function toggleActivityFilter() {
            const dropdown = document.getElementById('activity-filter-dropdown');
            dropdown.classList.toggle('hidden');
        }

        function setActivityFilter(filter, label) {
            document.getElementById('activity-filter-label').textContent = label;
            document.getElementById('activity-filter-dropdown').classList.add('hidden');
            
            // Filter the activity items
            const items = document.querySelectorAll('.activity-item');
            items.forEach(item => {
                const itemType = item.dataset.type;
                if (filter === 'all') {
                    item.style.display = '';
                } else if (filter === itemType) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Close activity filter dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('activity-filter-dropdown');
            const button = e.target.closest('button[onclick="toggleActivityFilter()"]');
            if (!button && dropdown && !dropdown.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // AI Insights Rating
        function rateInsight(button, rating) {
            const thumbsContainer = button.parentElement;
            const insightCard = button.closest('.bg-neutral-50');
            
            // Visual feedback on button
            if (rating === 'up') {
                button.classList.add('bg-success-200', 'ring-2', 'ring-success-300');
                // Hide thumbs after click
                setTimeout(() => {
                    thumbsContainer.style.opacity = '0';
                }, 300);
                showToast('Thank you for your feedback!');
            } else {
                // Thumbs down - remove the insight card
                if (insightCard) {
                    insightCard.style.transition = 'opacity 0.3s, transform 0.3s';
                    insightCard.style.opacity = '0';
                    insightCard.style.transform = 'translateX(20px)';
                    setTimeout(() => {
                        insightCard.remove();
                    }, 300);
                }
                showToast('Insight removed');
            }
        }
        
        // Toast notification - Rise UI style
        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'bg-white border border-neutral-200 text-neutral-800 px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 animate-fade-in min-w-[280px]';
            toast.innerHTML = `
                <div class="w-8 h-8 bg-success-100 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-success-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
                </div>
                <span class="text-sm font-medium">${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-auto p-1 text-neutral-400 hover:text-neutral-600 transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            `;
            container.appendChild(toast);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                toast.style.transition = 'all 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Time Range Toggle
        let currentTimeRange = '1M';
        
        const timeRangeData = {
            '1M': {
                contacts: { total: '42,580', new: '1,321', active: '38,240', unsub: '68' },
                trends: { total: '3%', new: '6%', active: '4%', unsub: '2%' }
            },
            '6M': {
                contacts: { total: '38,420', new: '8,240', active: '35,180', unsub: '412' },
                trends: { total: '12%', new: '24%', active: '15%', unsub: '8%' }
            },
            '1Y': {
                contacts: { total: '32,100', new: '15,680', active: '28,450', unsub: '892' },
                trends: { total: '28%', new: '48%', active: '32%', unsub: '15%' }
            }
        };

        function setTimeRange(range) {
            currentTimeRange = range;
            
            // Update button states
            document.querySelectorAll('.time-range-btn').forEach(btn => {
                btn.classList.remove('text-white', 'bg-neutral-800');
                btn.classList.add('text-neutral-500', 'bg-white');
            });
            
            const activeBtn = document.getElementById('time-' + range.toLowerCase());
            if (activeBtn) {
                activeBtn.classList.remove('text-neutral-500', 'bg-white');
                activeBtn.classList.add('text-white', 'bg-neutral-800');
            }
            
            // Update widget data
            updateContactGrowthWidget(range);
        }

        function updateContactGrowthWidget(range) {
            const data = timeRangeData[range];
            if (!data) return;
            
            // Update the contact numbers (these IDs would need to be added to the HTML)
            const elements = {
                'contact-total': data.contacts.total,
                'contact-new': data.contacts.new,
                'contact-active': data.contacts.active,
                'contact-unsub': data.contacts.unsub
            };
            
            Object.keys(elements).forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = elements[id];
            });
            
            // Update trends
            const trendElements = {
                'trend-total': data.trends.total,
                'trend-new': data.trends.new,
                'trend-active': data.trends.active,
                'trend-unsub': data.trends.unsub
            };
            
            Object.keys(trendElements).forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = trendElements[id] + ' vs last ' + (range === '1Y' ? 'year' : range === '6M' ? '6 months' : '30d');
            });
        }

        // Performance Filter Dropdown
        let performanceFilterOpen = false;
        let currentFilter = 'email_click';
        
        const filterData = {
            // Email metrics
            email_click: { 
                label: 'Email click rate', 
                benchmark: '4.6%',
                highest: [
                    { name: 'UPS New Jersey', value: '8.2%', width: '85%' },
                    { name: 'UPS New York', value: '7.1%', width: '72%' },
                    { name: 'UPS Connecticut', value: '5.8%', width: '58%' }
                ],
                lowest: [
                    { name: 'UPS Vermont', value: '1.8%', width: '18%' },
                    { name: 'UPS Rhode Island', value: '2.2%', width: '22%' },
                    { name: 'UPS Maine', value: '2.8%', width: '28%' }
                ]
            },
            email_open: { 
                label: 'Email open rate', 
                benchmark: '21.3%',
                highest: [
                    { name: 'UPS Massachusetts', value: '34.2%', width: '92%' },
                    { name: 'UPS New York', value: '28.7%', width: '78%' },
                    { name: 'UPS California', value: '26.1%', width: '70%' }
                ],
                lowest: [
                    { name: 'UPS Texas', value: '12.4%', width: '15%' },
                    { name: 'UPS Florida', value: '14.8%', width: '22%' },
                    { name: 'UPS Ohio', value: '15.2%', width: '25%' }
                ]
            },
            email_bounce: { 
                label: 'Email bounce rate', 
                benchmark: '2.1%',
                highest: [
                    { name: 'UPS Georgia', value: '4.8%', width: '88%' },
                    { name: 'UPS Michigan', value: '3.9%', width: '72%' },
                    { name: 'UPS Arizona', value: '3.2%', width: '58%' }
                ],
                lowest: [
                    { name: 'UPS New Jersey', value: '0.8%', width: '12%' },
                    { name: 'UPS New York', value: '1.1%', width: '18%' },
                    { name: 'UPS Connecticut', value: '1.4%', width: '24%' }
                ]
            },
            // Contact metrics
            contact_growth: { 
                label: 'Contact growth', 
                benchmark: '+2.1%',
                highest: [
                    { name: 'UPS California', value: '+5.4%', width: '90%' },
                    { name: 'UPS Texas', value: '+4.1%', width: '72%' },
                    { name: 'UPS Florida', value: '+3.8%', width: '65%' }
                ],
                lowest: [
                    { name: 'UPS Vermont', value: '-0.2%', width: '8%' },
                    { name: 'UPS Maine', value: '+0.4%', width: '15%' },
                    { name: 'UPS Rhode Island', value: '+0.7%', width: '22%' }
                ]
            },
            contact_unsub: { 
                label: 'Unsubscribe rate', 
                benchmark: '0.4%',
                highest: [
                    { name: 'UPS Nevada', value: '1.2%', width: '85%' },
                    { name: 'UPS Oregon', value: '0.9%', width: '65%' },
                    { name: 'UPS Washington', value: '0.7%', width: '50%' }
                ],
                lowest: [
                    { name: 'UPS New Jersey', value: '0.1%', width: '10%' },
                    { name: 'UPS Massachusetts', value: '0.2%', width: '18%' },
                    { name: 'UPS Connecticut', value: '0.2%', width: '18%' }
                ]
            },
            // SMS metrics
            sms_click: { 
                label: 'SMS click rate', 
                benchmark: '8.2%',
                highest: [
                    { name: 'UPS New York', value: '14.6%', width: '92%' },
                    { name: 'UPS Illinois', value: '12.3%', width: '78%' },
                    { name: 'UPS Pennsylvania', value: '10.8%', width: '68%' }
                ],
                lowest: [
                    { name: 'UPS Nebraska', value: '3.2%', width: '12%' },
                    { name: 'UPS Kansas', value: '4.1%', width: '20%' },
                    { name: 'UPS Iowa', value: '4.7%', width: '26%' }
                ]
            },
            sms_delivered: { 
                label: 'SMS delivery rate', 
                benchmark: '97.4%',
                highest: [
                    { name: 'UPS Connecticut', value: '99.2%', width: '95%' },
                    { name: 'UPS New Jersey', value: '98.8%', width: '88%' },
                    { name: 'UPS Massachusetts', value: '98.4%', width: '82%' }
                ],
                lowest: [
                    { name: 'UPS Montana', value: '94.1%', width: '18%' },
                    { name: 'UPS Wyoming', value: '94.8%', width: '25%' },
                    { name: 'UPS Alaska', value: '95.2%', width: '30%' }
                ]
            },
            sms_optout: { 
                label: 'SMS opt-out rate', 
                benchmark: '0.3%',
                highest: [
                    { name: 'UPS Utah', value: '0.9%', width: '88%' },
                    { name: 'UPS Colorado', value: '0.7%', width: '70%' },
                    { name: 'UPS Arizona', value: '0.5%', width: '50%' }
                ],
                lowest: [
                    { name: 'UPS New York', value: '0.1%', width: '10%' },
                    { name: 'UPS California', value: '0.1%', width: '10%' },
                    { name: 'UPS Texas', value: '0.2%', width: '18%' }
                ]
            }
        };
        
        // Performance type configuration
        let currentPerformanceType = 'account';
        let currentMetric = 'click_rate';
        let performanceTypeOpen = false;
        
        // Metrics aligned with Constant Contact reporting terminology
        // Reference: https://knowledgebase.constantcontact.com
        const performanceTypeConfig = {
            account: {
                label: 'Account performance',
                metrics: [
                    { id: 'open_rate', label: 'Open rate', benchmark: '17.6%' },
                    { id: 'click_rate', label: 'Click rate', benchmark: '1.3%' },
                    { id: 'bounce_rate', label: 'Bounce rate', benchmark: '8.9%' },
                    { id: 'unsubscribe_rate', label: 'Unsubscribe rate', benchmark: '0.1%' },
                    { id: 'contact_growth', label: 'Contact growth', benchmark: '+2.1%' },
                    { id: 'campaigns_sent', label: 'Campaigns sent', benchmark: '156' }
                ]
            },
            email: {
                label: 'Email campaigns',
                metrics: [
                    { id: 'open_rate', label: 'Open rate', benchmark: '17.6%' },
                    { id: 'click_rate', label: 'Click rate', benchmark: '1.3%' },
                    { id: 'bounce_rate', label: 'Bounce rate', benchmark: '8.9%' },
                    { id: 'unsubscribe_rate', label: 'Unsubscribe rate', benchmark: '0.1%' },
                    { id: 'spam_rate', label: 'Spam reports', benchmark: '0.02%' },
                    { id: 'did_not_open', label: 'Did not open', benchmark: '82.4%' }
                ]
            },
            sms: {
                label: 'SMS campaigns',
                metrics: [
                    { id: 'sends', label: 'Sends', benchmark: '892' },
                    { id: 'delivery_rate', label: 'Delivered', benchmark: '97.4%' },
                    { id: 'click_rate', label: 'Click rate', benchmark: '8.2%' }
                ]
            },
            automation: {
                label: 'Automations',
                metrics: [
                    { id: 'starts', label: 'Starts', benchmark: '2.4K' },
                    { id: 'sends', label: 'Sends', benchmark: '1.2K' },
                    { id: 'clicks', label: 'Clicks', benchmark: '856' }
                ]
            }
        };
        
        function togglePerformanceType() {
            performanceTypeOpen = !performanceTypeOpen;
            const menu = document.getElementById('performance-type-menu');
            menu.classList.toggle('hidden', !performanceTypeOpen);
        }
        
        function selectPerformanceType(type) {
            currentPerformanceType = type;
            const config = performanceTypeConfig[type];
            
            // Update title label
            const label = document.getElementById('performance-type-label');
            if (label) label.textContent = config.label;
            
            // Update checkmarks
            Object.keys(performanceTypeConfig).forEach(key => {
                const check = document.getElementById('type-check-' + key);
                if (check) {
                    check.classList.toggle('text-main-600', key === type);
                    check.classList.toggle('text-transparent', key !== type);
                }
            });
            
            // Update metric options
            updateMetricOptions(config.metrics);
            
            // Select first metric by default
            if (config.metrics.length > 0) {
                selectPerformanceMetric(config.metrics[0].id);
            }
            
            // Close menu
            togglePerformanceType();
        }
        
        function updateMetricOptions(metrics) {
            const container = document.getElementById('metric-options');
            if (!container) return;
            
            container.innerHTML = metrics.map((metric, index) => `
                <button onclick="selectPerformanceMetric('${metric.id}')" class="w-full text-left px-3 py-2 text-sm hover:bg-neutral-50 flex items-center gap-2">
                    <svg id="metric-check-${metric.id}" class="w-4 h-4 ${index === 0 ? 'text-main-600' : 'text-transparent'}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                    <span>${metric.label}</span>
                </button>
            `).join('');
        }
        
        function selectPerformanceMetric(metricId) {
            currentMetric = metricId;
            const config = performanceTypeConfig[currentPerformanceType];
            const metric = config.metrics.find(m => m.id === metricId);
            
            if (!metric) return;
            
            // Update checkmarks
            config.metrics.forEach(m => {
                const check = document.getElementById('metric-check-' + m.id);
                if (check) {
                    check.classList.toggle('text-main-600', m.id === metricId);
                    check.classList.toggle('text-transparent', m.id !== metricId);
                }
            });
            
            // Update filter label
            const label = document.getElementById('performance-filter-label');
            if (label) label.textContent = metric.label;
            
            // Update benchmark
            const benchmark = document.getElementById('performance-benchmark');
            if (benchmark) benchmark.textContent = 'Based on benchmark of ' + metric.benchmark;
            
            // Update leaderboard with appropriate data
            const filterKey = `${currentPerformanceType}_${metricId}`;
            if (filterData[filterKey]) {
                updateLeaderboard(filterData[filterKey]);
            } else {
                // Fallback to email click data
                updateLeaderboard(filterData.email_click || filterData[Object.keys(filterData)[0]]);
            }
            
            // Close menu
            togglePerformanceFilter();
        }

        function togglePerformanceFilter() {
            performanceFilterOpen = !performanceFilterOpen;
            const menu = document.getElementById('performance-filter-menu');
            menu.classList.toggle('hidden', !performanceFilterOpen);
        }

        function selectPerformanceFilter(filter) {
            currentFilter = filter;
            
            // Update checkmarks
            Object.keys(filterData).forEach(key => {
                const check = document.getElementById('filter-check-' + key);
                if (check) {
                    check.classList.toggle('text-neutral-800', key === filter);
                    check.classList.toggle('text-transparent', key !== filter);
                }
            });
            
            // Update label in button and benchmark in footer
            const data = filterData[filter];
            const label = document.getElementById('performance-filter-label');
            const benchmark = document.getElementById('performance-benchmark');
            if (label) label.textContent = data.label;
            if (benchmark) benchmark.textContent = 'Based on benchmark of ' + data.benchmark;
            
            // Update leaderboard
            updateLeaderboard(data);
            
            // Close menu
            togglePerformanceFilter();
        }
        
        function updateLeaderboard(data) {
            // Update highest performers
            data.highest.forEach((item, i) => {
                const name = document.getElementById(`high-${i+1}-name`);
                const bar = document.getElementById(`high-${i+1}-bar`);
                const value = document.getElementById(`high-${i+1}-value`);
                if (name) name.textContent = item.name;
                if (bar) bar.style.width = item.width;
                if (value) value.textContent = item.value;
            });
            
            // Update lowest performers
            data.lowest.forEach((item, i) => {
                const name = document.getElementById(`low-${i+1}-name`);
                const bar = document.getElementById(`low-${i+1}-bar`);
                const value = document.getElementById(`low-${i+1}-value`);
                if (name) name.textContent = item.name;
                if (bar) bar.style.width = item.width;
                if (value) value.textContent = item.value;
            });
        }

        // Unified Filter Functions
        let unifiedFilterOpen = false;
        let currentUnifiedDateRange = '30d';
        let currentUnifiedType = 'account';
        let currentUnifiedMetric = 'click_rate';
        let currentUnifiedSort = 'highest';
        
        // Metric options per type
        const unifiedMetricConfig = {
            account: [
                { id: 'open_rate', label: 'Open rate' },
                { id: 'click_rate', label: 'Click rate' },
                { id: 'bounce_rate', label: 'Bounce rate' },
                { id: 'unsubscribe_rate', label: 'Unsubscribe rate' },
                { id: 'contact_growth', label: 'Contact growth' },
                { id: 'campaigns_sent', label: 'Campaigns sent' }
            ],
            email: [
                { id: 'open_rate', label: 'Open rate' },
                { id: 'click_rate', label: 'Click rate' },
                { id: 'bounce_rate', label: 'Bounce rate' },
                { id: 'unsubscribe_rate', label: 'Unsubscribe rate' },
                { id: 'spam_rate', label: 'Spam reports' },
                { id: 'did_not_open', label: 'Did not open' }
            ],
            sms: [
                { id: 'sends', label: 'Sends' },
                { id: 'delivery_rate', label: 'Delivered' },
                { id: 'click_rate', label: 'Click rate' }
            ],
            automation: [
                { id: 'starts', label: 'Starts' },
                { id: 'sends', label: 'Sends' },
                { id: 'clicks', label: 'Clicks' }
            ]
        };
        
        // Labels for dynamic title
        const unifiedTypeLabels = {
            account: 'accounts',
            email: 'email campaigns',
            sms: 'SMS campaigns',
            automation: 'automations'
        };
        
        const unifiedDateLabels = {
            '7d': 'the last 7 days',
            '30d': 'the last 30 days',
            '90d': 'the last 90 days'
        };
        
        function toggleUnifiedFilter() {
            unifiedFilterOpen = !unifiedFilterOpen;
            const menu = document.getElementById('unified-filter-menu');
            menu.classList.toggle('hidden', !unifiedFilterOpen);
        }
        
        // Card-level filter functions (Email, Contacts, SMS)
        const cardFilterState = {
            email: '30d',
            contacts: '30d',
            sms: '30d'
        };
        
        function toggleCardFilter(cardType) {
            const menu = document.getElementById(`${cardType}-filter-menu`);
            // Close all other card menus first
            ['email', 'contacts', 'sms'].forEach(type => {
                if (type !== cardType) {
                    const otherMenu = document.getElementById(`${type}-filter-menu`);
                    if (otherMenu) otherMenu.classList.add('hidden');
                }
            });
            menu.classList.toggle('hidden');
        }
        
        function setCardFilter(cardType, range) {
            cardFilterState[cardType] = range;
            
            // Update subtitle
            const subtitle = document.getElementById(`${cardType}-subtitle`);
            const rangeLabels = {
                '7d': 'in the last 7 days',
                '30d': 'in the last 30 days',
                '90d': 'in the last 90 days'
            };
            if (subtitle) {
                subtitle.textContent = rangeLabels[range] || rangeLabels['30d'];
            }
            
            // Update checkmarks in menu
            const menu = document.getElementById(`${cardType}-filter-menu`);
            if (menu) {
                menu.querySelectorAll('.card-filter-btn').forEach(btn => {
                    const check = btn.querySelector('.card-filter-check');
                    if (btn.dataset.range === range) {
                        check.classList.remove('text-transparent');
                        check.classList.add('text-main-600');
                    } else {
                        check.classList.remove('text-main-600');
                        check.classList.add('text-transparent');
                    }
                });
            }
            
            // Close menu
            menu.classList.add('hidden');
            
            // Trigger data update based on the column date range mapping
            const rangeMap = { '7d': '1w', '30d': '1m', '90d': '3m' };
            setCardDateRange(cardType === 'contacts' ? 'contacts' : cardType, rangeMap[range] || '1m');
        }
        
        // Close card filter menus when clicking outside
        document.addEventListener('click', function(e) {
            ['email', 'contacts', 'sms'].forEach(type => {
                const menu = document.getElementById(`${type}-filter-menu`);
                const btn = e.target.closest(`[onclick="toggleCardFilter('${type}')"]`);
                if (!btn && menu && !menu.contains(e.target)) {
                    menu.classList.add('hidden');
                }
            });
        });
        
        function updateLeaderboardTitle() {
            const title = document.getElementById('leaderboard-title');
            const subtitle = document.getElementById('leaderboard-subtitle');
            if (!title || !subtitle) return;
            
            const metricConfig = unifiedMetricConfig[currentUnifiedType];
            const metric = metricConfig?.find(m => m.id === currentUnifiedMetric);
            const metricLabel = metric ? metric.label.toLowerCase() : 'click rate';
            const dateLabel = unifiedDateLabels[currentUnifiedDateRange] || 'the last 30 days';
            const sortLabel = currentUnifiedSort === 'lowest' ? 'Lowest' : 'Top';
            const typeLabel = unifiedTypeLabels[currentUnifiedType] || 'accounts';
            
            title.textContent = `${sortLabel} performing ${typeLabel}`;
            subtitle.textContent = `by ${metricLabel} in ${dateLabel}`;
        }
        
        function setUnifiedDateRange(range) {
            currentUnifiedDateRange = range;
            
            // Update checkmarks
            document.querySelectorAll('.unified-range-btn').forEach(btn => {
                const check = btn.querySelector('.unified-range-check');
                if (btn.dataset.range === range) {
                    check?.classList.remove('text-transparent');
                    check?.classList.add('text-main-600');
                } else {
                    check?.classList.remove('text-main-600');
                    check?.classList.add('text-transparent');
                }
            });
            
            // Map to column range and trigger update
            const columnRange = range === '7d' ? '1w' : range === '30d' ? '1m' : '3m';
            setColumnDateRange(columnRange);
            
            // Update title
            updateLeaderboardTitle();
        }
        
        function setUnifiedPerformanceType(type) {
            currentUnifiedType = type;
            
            // Update checkmarks
            document.querySelectorAll('.unified-type-btn').forEach(btn => {
                const check = btn.querySelector('.unified-type-check');
                if (btn.dataset.type === type) {
                    check?.classList.remove('text-transparent');
                    check?.classList.add('text-main-600');
                } else {
                    check?.classList.remove('text-main-600');
                    check?.classList.add('text-transparent');
                }
            });
            
            // Update metric options for this type
            updateUnifiedMetricOptions(type);
            
            // Update title
            updateLeaderboardTitle();
        }
        
        function updateUnifiedMetricOptions(type) {
            const container = document.getElementById('unified-metric-options');
            if (!container) return;
            
            const metrics = unifiedMetricConfig[type] || [];
            const firstMetricId = metrics.length > 0 ? metrics[0].id : 'click_rate';
            
            container.innerHTML = metrics.map((metric, index) => `
                <button onclick="setUnifiedMetric('${metric.id}')" class="unified-metric-btn w-full text-left px-2.5 py-1.5 text-sm rounded-lg hover:bg-neutral-50 flex items-center gap-2 transition-colors" data-metric="${metric.id}">
                    <svg class="unified-metric-check w-4 h-4 ${index === 0 ? 'text-main-600' : 'text-transparent'}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
                    <span>${metric.label}</span>
                </button>
            `).join('');
            
            // Select first metric by default
            currentUnifiedMetric = firstMetricId;
            updateLeaderboardTitle();
        }
        
        function setUnifiedMetric(metricId) {
            currentUnifiedMetric = metricId;
            
            // Update checkmarks
            document.querySelectorAll('.unified-metric-btn').forEach(btn => {
                const check = btn.querySelector('.unified-metric-check');
                if (btn.dataset.metric === metricId) {
                    check?.classList.remove('text-transparent');
                    check?.classList.add('text-main-600');
                } else {
                    check?.classList.remove('text-main-600');
                    check?.classList.add('text-transparent');
                }
            });
            
            // Update leaderboard data
            const filterKey = `${currentUnifiedType}_${metricId}`;
            if (filterData[filterKey]) {
                updateLeaderboard(filterData[filterKey]);
            } else if (filterData[`email_${metricId}`]) {
                updateLeaderboard(filterData[`email_${metricId}`]);
            }
            
            // Update title
            updateLeaderboardTitle();
        }
        
        function setUnifiedSort(sort) {
            currentUnifiedSort = sort;
            
            // Update checkmarks
            document.querySelectorAll('.unified-sort-btn').forEach(btn => {
                const check = btn.querySelector('.unified-sort-check');
                if (btn.dataset.sort === sort) {
                    check?.classList.remove('text-transparent');
                    check?.classList.add('text-main-600');
                } else {
                    check?.classList.remove('text-main-600');
                    check?.classList.add('text-transparent');
                }
            });
            
            // Show/hide appropriate section
            const highestSection = document.getElementById('leaderboard-highest');
            const lowestSection = document.getElementById('leaderboard-lowest');
            const highestLabel = highestSection?.previousElementSibling;
            const lowestLabel = lowestSection?.previousElementSibling;
            
            if (sort === 'lowest') {
                // Show lowest, hide highest
                if (highestSection) highestSection.classList.add('hidden');
                if (highestLabel) highestLabel.classList.add('hidden');
                if (lowestSection) lowestSection.classList.remove('hidden');
                if (lowestLabel) lowestLabel.classList.remove('hidden');
            } else {
                // Show highest, hide lowest (default)
                if (highestSection) highestSection.classList.remove('hidden');
                if (highestLabel) highestLabel.classList.remove('hidden');
                if (lowestSection) lowestSection.classList.add('hidden');
                if (lowestLabel) lowestLabel.classList.add('hidden');
            }
            
            // Update title
            updateLeaderboardTitle();
        }
        
        function saveFilterDefaults() {
            // Save current filter settings as default
            showToast('Filter settings saved as default');
            
            // Close the menu
            const menu = document.getElementById('unified-filter-menu');
            if (menu) menu.classList.add('hidden');
            unifiedFilterOpen = false;
        }
        
        // Insights V2 Carousel
        let currentInsightV2 = 0;
        
        function goToInsightV2(index) {
            currentInsightV2 = index;
            document.querySelectorAll('.insight-v2-slide').forEach((slide, i) => {
                slide.classList.toggle('hidden', i !== index);
            });
            document.querySelectorAll('.insight-v2-dot').forEach((dot, i) => {
                if (i === index) {
                    dot.classList.remove('bg-neutral-300');
                    dot.style.background = 'linear-gradient(135deg, #875bf7, #6927da)';
                } else {
                    dot.classList.add('bg-neutral-300');
                    dot.style.background = '';
                }
            });
        }
        
        function rateInsightV2(btn, rating) {
            const icon = btn.querySelector('svg');
            if (rating === 'up') {
                btn.classList.add('text-success-600', 'bg-success-50');
                btn.classList.remove('text-neutral-400');
            } else {
                btn.classList.add('text-danger-600', 'bg-danger-50');
                btn.classList.remove('text-neutral-400');
            }
            showToast(rating === 'up' ? 'Thanks for the feedback!' : 'We\'ll improve this insight');
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            // Unified filter dropdown
            const unifiedMenu = document.getElementById('unified-filter-menu');
            const unifiedBtn = e.target.closest('[onclick="toggleUnifiedFilter()"]');
            if (!unifiedBtn && !e.target.closest('#unified-filter-menu')) {
                unifiedMenu?.classList.add('hidden');
                unifiedFilterOpen = false;
            }
            
            // Performance type dropdown (legacy)
            const typeMenu = document.getElementById('performance-type-menu');
            const typeBtn = e.target.closest('[onclick="togglePerformanceType()"]');
            if (!typeBtn && !e.target.closest('#performance-type-menu')) {
                typeMenu?.classList.add('hidden');
                performanceTypeOpen = false;
            }
            
            // Metric filter dropdown (legacy)
            const filterMenu = document.getElementById('performance-filter-menu');
            const filterBtn = e.target.closest('[onclick="togglePerformanceFilter()"]');
            if (!filterBtn && !e.target.closest('#performance-filter-menu')) {
                filterMenu?.classList.add('hidden');
                performanceFilterOpen = false;
            }
        });

        // AI Assistant Modal
        function openAIAssistant(context) {
            const modal = document.getElementById('ai-assistant-modal');
            const promptArea = document.getElementById('ai-prompt-input');
            const suggestionsContainer = document.getElementById('ai-suggestions');
            
            if (context === 'insights') {
                // Show performance-specific suggestions in chat body
                suggestionsContainer.innerHTML = `
                    <p class="text-sm text-neutral-600 mb-3">What would you like to know?</p>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="setPrompt('Show me performance insights across all accounts')" class="text-sm px-3 py-1.5 bg-main-50  border border-main-200 rounded-md hover:bg-main-100 transition-colors">Performance across accounts</button>
                        <button onclick="setPrompt('Compare email vs SMS engagement')" class="text-sm px-3 py-1.5 bg-main-50  border border-main-200 rounded-md hover:bg-main-100 transition-colors">Compare email vs SMS</button>
                        <button onclick="setPrompt('Which accounts are underperforming?')" class="text-sm px-3 py-1.5 bg-main-50  border border-main-200 rounded-md hover:bg-main-100 transition-colors">Underperforming accounts</button>
                        <button onclick="setPrompt('Compare campaigns between locations')" class="text-sm px-3 py-1.5 bg-main-50  border border-main-200 rounded-md hover:bg-main-100 transition-colors">Compare campaigns</button>
                    </div>
                `;
            } else {
                // General assistant - empty suggestions (uses the static tags)
                suggestionsContainer.innerHTML = '';
            }
            
            modal.classList.remove('hidden');
            setTimeout(() => promptArea.focus(), 100);
        }
        
        function closeAIAssistant() {
            const modal = document.getElementById('ai-assistant-modal');
            modal.classList.add('hidden');
            document.getElementById('ai-prompt-input').value = '';
            document.getElementById('ai-suggestions').innerHTML = '';
        }
        
        function setPrompt(text) {
            const input = document.getElementById('ai-prompt-input');
            input.value = text;
            input.focus();
        }
        
        function handleAISuggestion(type) {
            if (type === 'brainstorm') {
                setPrompt('Help me brainstorm campaign ideas for my audience');
            }
        }
        
        function submitAIPrompt() {
            const input = document.getElementById('ai-prompt-input');
            const suggestionsContainer = document.getElementById('ai-suggestions');
            if (input.value.trim()) {
                // Show the message in the chat
                suggestionsContainer.innerHTML = `
                    <div class="flex justify-end mb-3">
                        <div class="bg-main-600 text-white px-4 py-2 rounded-2xl rounded-br-sm max-w-[85%]">
                            <p class="text-sm">${input.value}</p>
                        </div>
                    </div>
                    <div class="flex justify-start">
                        <div class="bg-neutral-100 text-neutral-800 px-4 py-2 rounded-2xl rounded-bl-sm max-w-[85%]">
                            <p class="text-sm">I'm analyzing your request... This feature is coming soon!</p>
                        </div>
                    </div>
                `;
                input.value = '';
            }
        }
    </script>

    <!-- AI Assistant Modal -->
    <div id="ai-assistant-modal" class="hidden fixed inset-0 z-50 flex items-start justify-end pt-16 pr-4">
        <!-- Backdrop -->
        <div class="absolute inset-0" onclick="closeAIAssistant()"></div>
        
        <!-- Modal Content -->
        <div class="relative w-full max-w-sm bg-white rounded-3xl shadow-xl flex flex-col" style="height: 480px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);">
            <!-- Header - Tabler Sparkles icon for AI features -->
            <div class="flex items-center justify-between px-5 py-3 border-b border-neutral-200 bg-white rounded-t-3xl">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="url(#ai-modal-gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><defs><linearGradient id="ai-modal-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#186ded"/><stop offset="100%" stop-color="#875bf7"/></linearGradient></defs><path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2m-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6"/></svg>
                    <p class="text-base font-semibold text-neutral-950">AI assistant</p>
                    <span class="px-1.5 py-0.5 text-xs font-medium bg-main-100 border border-main-200 rounded-full leading-none">Beta</span>
                </div>
                <button onclick="closeAIAssistant()" class="p-1  hover:bg-main-50 rounded-md transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6l-12 12"></path><path d="M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Chat Body -->
            <div class="flex-1 overflow-y-auto px-5 py-3">
                <div class="mb-3">
                    <p class="text-base text-neutral-950 mb-2">Welcome back, Gail! ðŸ‘‹ How can I help you with your marketing today?</p>
                </div>
                <!-- Suggestions will be injected here -->
                <div id="ai-suggestions"></div>
            </div>
            
            <!-- Input Area -->
            <div class="flex flex-col px-3 pb-4">
                <!-- Quick Tags -->
                <div class="flex flex-wrap gap-2 mb-4">
                    <button onclick="handleAISuggestion('brainstorm')" class="flex items-center gap-2 px-2.5 py-1 text-sm  bg-main-50 border border-main-200 rounded-md hover:bg-main-100 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"></path><path d="M9 18h6"></path><path d="M10 22h4"></path></svg>
                        Brainstorm ideas with me
                    </button>
                </div>
                
                <!-- Textarea Input -->
                <div class="relative">
                    <textarea 
                        id="ai-prompt-input" 
                        rows="3"
                        placeholder="Search or ask anything" 
                        class="w-full px-3 py-2 pr-10 text-base text-neutral-950 placeholder-neutral-400 bg-white border border-main-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-main-500 focus:border-main-500"
                        onkeydown="if(event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); submitAIPrompt(); }"
                    ></textarea>
                    <span class="absolute bottom-2 right-2">
                        <button onclick="submitAIPrompt()" class="p-2 text-neutral-600 hover:bg-neutral-100 rounded-md transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="m5 12 7-7 7 7"></path><path d="M12 19V5"></path></svg>
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-20 right-6 z-[9999] flex flex-col gap-2"></div>

    <!-- Toggle Dot (shows when bar is hidden) -->
    <button onclick="toggleAuthorBar()" class="fixed bottom-2 left-2 w-3 h-3 rounded-full z-50 transition-opacity" style="background-color: #5b21b6; opacity: 0.3;" onmouseover="this.style.opacity='0.6'" onmouseout="this.style.opacity='0.3'"></button>

    <!-- Version Toggle Bar -->
    <div id="author-bar" class="fixed bottom-0 left-0 right-0 bg-zinc-900 border-t border-zinc-700 px-6 py-3 z-[9999]">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <a href="research-hub.html" class="flex items-center gap-2 text-zinc-400 hover:text-white transition-colors text-sm">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
                Back to Research Hub
            </a>
            <div class="flex items-center gap-4">
                <!-- Viewport Toggle: Mobile/Tablet/Desktop -->
                <div class="flex items-center gap-1 border-r border-zinc-700 pr-4">
                    <span class="text-zinc-500 text-xs mr-1">View:</span>
                    <!-- Mobile -->
                    <button onclick="setViewport('mobile')" id="viewport-mobile" class="viewport-btn p-1.5 rounded hover:bg-zinc-700 transition-colors text-zinc-500" title="Mobile (375px)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="7" y="2" width="10" height="20" rx="2"/><path d="M12 18h.01"/></svg>
                    </button>
                    <!-- Tablet -->
                    <button onclick="setViewport('tablet')" id="viewport-tablet" class="viewport-btn p-1.5 rounded hover:bg-zinc-700 transition-colors text-zinc-500" title="Tablet (768px)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="4" y="3" width="16" height="18" rx="2"/><path d="M12 18h.01"/></svg>
                    </button>
                    <!-- Desktop -->
                    <button onclick="setViewport('desktop')" id="viewport-desktop" class="viewport-btn p-1.5 rounded bg-main-600 text-white" title="Desktop (Full width)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
                    </button>
                </div>
                
                <!-- A/B Test: Date Filter Mode -->
                <div class="flex items-center gap-2 border-r border-zinc-700 pr-4">
                    <span class="text-zinc-500 text-xs">Date Filter:</span>
                    <button onclick="setFilterMode('page')" id="filter-mode-page" class="filter-mode-btn px-2 py-1 text-xs font-medium rounded bg-accent-600 text-white">Page</button>
                    <button onclick="setFilterMode('card')" id="filter-mode-card" class="filter-mode-btn px-2 py-1 text-xs font-medium rounded bg-zinc-800 text-zinc-400 hover:bg-zinc-700">Card</button>
                </div>
                
                <div class="flex items-center gap-2">
                    <span class="text-zinc-500 text-sm mr-2">Version:</span>
                    <a href="org-dashboard-m1.html" class="px-3 py-1.5 text-sm font-medium rounded-md bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white transition-colors">V1.0</a>
                    <span class="px-3 py-1.5 text-sm font-medium rounded-md bg-success-600 text-white">V1.2</span>
                    <a href="option-b-northstar-empty.html" class="px-3 py-1.5 text-sm font-medium rounded-md bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white transition-colors">Future X</a>
                    <button onclick="toggleAuthorBar()" class="text-zinc-500 hover:text-white ml-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
    function toggleAuthorBar() {
        const bar = document.getElementById('author-bar');
        bar.style.display = bar.style.display === 'none' ? 'block' : 'none';
    }
    
    // Viewport Toggle: Mobile/Tablet/Desktop simulation
    let currentViewport = 'desktop';
    
    function setViewport(viewport) {
        currentViewport = viewport;
        
        // Update button states
        document.querySelectorAll('.viewport-btn').forEach(btn => {
            btn.classList.remove('bg-main-600', 'text-white');
            btn.classList.add('text-zinc-500');
        });
        const activeBtn = document.getElementById(`viewport-${viewport}`);
        if (activeBtn) {
            activeBtn.classList.remove('text-zinc-500');
            activeBtn.classList.add('bg-main-600', 'text-white');
        }
        
        // Get elements
        const topNav = document.querySelector('nav.bg-neutral-100');
        const mainContainer = document.querySelector('.flex.min-h-screen');
        const body = document.body;
        
        // Viewport widths
        const viewportWidths = {
            mobile: 375,
            tablet: 768,
            desktop: null
        };
        
        const width = viewportWidths[viewport];
        
        // Remove viewport classes
        body.classList.remove('viewport-mobile', 'viewport-tablet');
        
        if (viewport === 'desktop') {
            // Reset everything
            body.style.background = '';
            if (topNav) {
                topNav.style.cssText = '';
            }
            if (mainContainer) {
                mainContainer.style.cssText = '';
            }
            // Remove viewport overlay if exists
            const overlay = document.getElementById('viewport-overlay');
            if (overlay) overlay.remove();
            return;
        }
        
        // Add viewport class for CSS targeting
        body.classList.add(`viewport-${viewport}`);
        
        // Apply dark background outside viewport
        body.style.background = '#1f1f23';
        
        // Create or update viewport overlay
        let overlay = document.getElementById('viewport-overlay');
        if (!overlay) {
            overlay = document.createElement('div');
            overlay.id = 'viewport-overlay';
            body.insertBefore(overlay, body.firstChild);
        }
        
        overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: ${width}px;
            height: calc(100vh - 52px);
            background: #f7f9fd;
            box-shadow: 0 0 0 1px rgba(255,255,255,0.1), 0 25px 50px -12px rgba(0,0,0,0.5);
            border-radius: 12px 12px 0 0;
            z-index: 30;
            overflow: hidden;
            pointer-events: none;
        `;
        
        // Constrain the top nav
        if (topNav) {
            topNav.style.cssText = `
                max-width: ${width}px;
                margin: 0 auto;
                border-radius: 12px 12px 0 0;
                position: relative;
                z-index: 60;
            `;
        }
        
        // Constrain main content
        if (mainContainer) {
            mainContainer.style.cssText = `
                max-width: ${width}px;
                margin: 0 auto;
                background: #f7f9fd;
                min-height: calc(100vh - 52px);
                position: relative;
                z-index: 60;
                overflow: visible;
            `;
        }
        
    }
    
    // A/B Test: Filter Mode (page vs card)
    function setFilterMode(mode) {
        // Update URL
        const url = new URL(window.location.href);
        url.searchParams.set('filterMode', mode);
        window.history.replaceState({}, '', url);
        
        // Update toggle buttons
        document.querySelectorAll('.filter-mode-btn').forEach(btn => {
            btn.classList.remove('bg-accent-600', 'text-white');
            btn.classList.add('bg-zinc-800', 'text-zinc-400', 'hover:bg-zinc-700');
        });
        const activeBtn = document.getElementById(`filter-mode-${mode}`);
        if (activeBtn) {
            activeBtn.classList.remove('bg-zinc-800', 'text-zinc-400', 'hover:bg-zinc-700');
            activeBtn.classList.add('bg-accent-600', 'text-white');
        }
        
        // Toggle UI visibility
        const pageFilter = document.getElementById('page-date-filter');
        const cardFilters = document.querySelectorAll('.card-date-filter');
        
        if (mode === 'page') {
            if (pageFilter) pageFilter.style.display = 'flex';
            cardFilters.forEach(el => el.style.display = 'none');
        } else {
            if (pageFilter) pageFilter.style.display = 'none';
            cardFilters.forEach(el => el.style.display = 'flex');
        }
    }
    
    // Initialize filter mode from URL on page load
    document.addEventListener('DOMContentLoaded', function() {
        const params = new URLSearchParams(window.location.search);
        const mode = params.get('filterMode') || 'page';
        setFilterMode(mode);
    });
    </script>
</body>
</html>

